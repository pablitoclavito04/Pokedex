import{a as se,b as pe,c as me}from"./chunk-KWCSRGWW.js";import"./chunk-CXI6OMTD.js";import"./chunk-MSK4NZ4G.js";import"./chunk-LV7F46D5.js";import{a as F}from"./chunk-R4VOAYRD.js";import{a as v}from"./chunk-STHJB42X.js";import{a as Y,b as q,d as ee,e as p,g as te,h as oe,i as ne,j as re}from"./chunk-GKLAR3GE.js";import{a as ae}from"./chunk-SYVWD7B3.js";import{a as ie}from"./chunk-ZOOKMLVN.js";import{b as V,c as W,d as K,e as X,f as Z}from"./chunk-JVQM422X.js";import{Ab as M,Bb as B,H as j,Ha as E,Kb as T,Lb as D,Ma as m,Q as s,Xa as d,Za as c,fa as Q,fb as l,gb as u,hb as f,hc as J,ib as b,jc as C,k as w,l as S,p as H,qb as U,v as $,x as L,y as g,za as h}from"./chunk-YPKSWN7B.js";var x=(e,n)=>{let o=s(F),t=s(p);return o.isLoggedIn()?!0:t.createUrlTree(["/login"],{queryParams:{returnUrl:n.url}})},k=(e,n)=>{let o=s(F),t=s(p);return o.isLoggedIn()?t.createUrlTree(["/"]):!0};var I=(e,n,o,t)=>e.form?.dirty?confirm("Hay cambios sin guardar. \xBFSeguro que quieres salir?"):!0;var A=(e,n)=>{let o=s(W),t=s(p),i=e.paramMap.get("id");if(!i||isNaN(Number(i))||Number(i)<1||Number(i)>1025)return t.navigate(["/pokedex"],{state:{error:`ID de Pok\xE9mon inv\xE1lido: ${i}`}}),w(null);let a=Number(i);return $({pokemon:o.get(`https://pokeapi.co/api/v2/pokemon/${a}`),species:o.get(`https://pokeapi.co/api/v2/pokemon-species/${a}`)}).pipe(H(({pokemon:r,species:N})=>{let fe=N.names?.find(R=>R.language.name==="es")?.name||r.name.charAt(0).toUpperCase()+r.name.slice(1);return{id:r.id,name:r.name,spanishName:fe,types:r.types.map(R=>R.type.name),image:r.sprites.other["official-artwork"].front_default}}),g(r=>(console.error("Error en pokemonResolver:",r),t.navigate(["/pokedex"],{state:{error:`No se pudo cargar el Pok\xE9mon con ID ${i}`}}),w(null))))};var de=[{path:"",loadComponent:()=>import("./chunk-6PN4XDSH.js").then(e=>e.HomeComponent),title:"Pok\xE9dex - Tu enciclopedia Pok\xE9mon",data:{breadcrumb:"Inicio"}},{path:"pokedex",loadComponent:()=>import("./chunk-ZWSWENQ6.js").then(e=>e.PokedexComponent),title:"Pok\xE9dex - Lista de Pok\xE9mon",data:{breadcrumb:"Pok\xE9dex"}},{path:"pokemon/:id",loadComponent:()=>import("./chunk-Y7HD2KUB.js").then(e=>e.PokemonDetailComponent),title:"Detalle Pok\xE9mon",data:{breadcrumb:":id"},resolve:{pokemon:A}},{path:"login",loadComponent:()=>import("./chunk-E6PW73CZ.js").then(e=>e.LoginComponent),title:"Iniciar Sesi\xF3n - Pok\xE9dex",canActivate:[k],data:{breadcrumb:"Iniciar Sesi\xF3n"}},{path:"register",loadComponent:()=>import("./chunk-O7H4QCQ3.js").then(e=>e.RegisterComponent),title:"Crear Cuenta - Pok\xE9dex",canActivate:[k],data:{breadcrumb:"Registro"}},{path:"comparador",loadComponent:()=>import("./chunk-AHBOGIIT.js").then(e=>e.ComparadorComponent),title:"Comparador de Pok\xE9mon - Pok\xE9dex",data:{breadcrumb:"Comparador"}},{path:"profile",loadComponent:()=>import("./chunk-DRN77GBO.js").then(e=>e.ProfileComponent),title:"Mi Perfil - Pok\xE9dex",canActivate:[x],data:{breadcrumb:"Mi Perfil"}},{path:"settings",loadComponent:()=>import("./chunk-UID5WPUK.js").then(e=>e.SettingsComponent),title:"Editar Perfil - Pok\xE9dex",canActivate:[x],canDeactivate:[I],data:{breadcrumb:"Ajustes"}},{path:"quiz",loadComponent:()=>import("./chunk-PEDXCFC7.js").then(e=>e.QuizComponent),title:"Quiz Pok\xE9mon - Pok\xE9dex",data:{breadcrumb:"Quiz"}},{path:"quiz/play",loadComponent:()=>import("./chunk-O5PNGFCR.js").then(e=>e.QuizPlayComponent),title:"Jugando Quiz - Pok\xE9dex",data:{breadcrumb:"Jugando"}},{path:"quiz/results",loadComponent:()=>import("./chunk-TFNMUJGC.js").then(e=>e.QuizResultsComponent),title:"Resultados Quiz - Pok\xE9dex",data:{breadcrumb:"Resultados"}},{path:"quiz/review",loadComponent:()=>import("./chunk-ZOUA3NFH.js").then(e=>e.QuizReviewComponent),title:"Revisi\xF3n de respuestas - Pok\xE9dex",data:{breadcrumb:"Revisi\xF3n"}},{path:"style-guide",loadComponent:()=>import("./chunk-F2NPWJBU.js").then(e=>e.StyleGuideComponent),title:"Style Guide - Pok\xE9dex",data:{breadcrumb:"Style Guide"}},{path:"forms-demo",loadComponent:()=>import("./chunk-KPVT57KV.js").then(e=>e.FormsDemoComponent),title:"Formularios Reactivos - Pok\xE9dex",data:{breadcrumb:"Formularios Demo"}},{path:"eventos-demo",loadComponent:()=>import("./chunk-3ETBO57E.js").then(e=>e.EventosDemoComponent),title:"Demostraci\xF3n Eventos - Pok\xE9dex",data:{breadcrumb:"Eventos Demo"}},{path:"dom-demo",loadComponent:()=>import("./chunk-VNMRKQU6.js").then(e=>e.DomDemoComponent),title:"Demostraci\xF3n DOM - Pok\xE9dex",data:{breadcrumb:"DOM Demo"}},{path:"galeria",loadComponent:()=>import("./chunk-KLD5VVIA.js").then(e=>e.GaleriaComponent),title:"Galer\xEDa Pok\xE9mon - Pok\xE9dex",data:{breadcrumb:"Galer\xEDa"}},{path:"**",loadComponent:()=>import("./chunk-YYJYFZ2B.js").then(e=>e.NotFoundComponent),title:"P\xE1gina no encontrada - Pok\xE9dex"}];var O=(e,n)=>{let t=s(v).getToken(),a=["pokedex-backend","/api/auth/profile","/api/auth/delete-account","/api/favoritos"].some(r=>e.url.includes(r));if(t&&a){let r=e.clone({setHeaders:{Authorization:`Bearer ${t}`}});return n(r)}return n(e)};var z=(e,n)=>{let o=s(p),t=s(ae),i=s(v);return n(e).pipe(g(a=>{let r="Ha ocurrido un error inesperado";if(a.error instanceof ErrorEvent)r=`Error de conexi\xF3n: ${a.error.message}`,console.error("Error del cliente:",a.error.message);else{switch(a.status){case 400:r=a.error?.message||"Solicitud incorrecta";break;case 401:r="Tu sesi\xF3n ha expirado. Por favor, inicia sesi\xF3n nuevamente.",i.logout(),o.navigate(["/login"],{queryParams:{returnUrl:o.url}});break;case 403:r="No tienes permisos para realizar esta acci\xF3n";break;case 404:if(!e.url.includes("pokeapi.co"))r=a.error?.message||"Recurso no encontrado";else return S(()=>a);break;case 409:r=a.error?.message||"Ya existe un recurso con esos datos";break;case 422:r=a.error?.message||"Los datos enviados no son v\xE1lidos";break;case 500:case 502:case 503:r="Error del servidor. Por favor, int\xE9ntalo m\xE1s tarde.";break;default:a.error?.message&&(r=a.error.message)}console.error(`Error HTTP ${a.status}:`,a.error?.message||a.message)}return(!e.url.includes("pokeapi.co")||a.status===401)&&!(e.url.includes("/api/auth/profile")&&e.method==="GET")&&t.error(r),S(()=>a)}))};var G=(e,n)=>{let o=Date.now();return console.group(`\u{1F310} HTTP ${e.method} \u2192 ${e.url}`),console.log("\u{1F4E4} Request:",{method:e.method,url:e.url,headers:e.headers.keys().reduce((t,i)=>(i==="Authorization"?t[i]=e.headers.get(i)?.substring(0,20)+"...":t[i]=e.headers.get(i),t),{}),body:e.body}),n(e).pipe(j({next:t=>{if(t instanceof V){let i=Date.now()-o;console.log(`\u{1F4E5} Response (${i}ms):`,{status:t.status,statusText:t.statusText,body:t.body}),console.groupEnd()}},error:t=>{let i=Date.now()-o;console.error(`\u274C Error (${i}ms):`,{status:t.status,statusText:t.statusText,message:t.error?.message||t.message}),console.groupEnd()}}))};var ce={providers:[Q(),oe(de,ne({scrollPositionRestoration:"top"}),re(te)),K(Z(),X([O,z,G]))]};var P=class e{static \u0275fac=function(o){return new(o||e)};static \u0275cmp=m({type:e,selectors:[["app-toast"]],decls:0,vars:0,template:function(o,t){},encapsulation:2})};function ge(e,n){if(e&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),b(4,"div",4),u(5,"div",5),b(6,"div",6),f(),b(7,"div",7),f()(),u(8,"span",8),M(9),T(10,"async"),f()(),u(11,"span",9),M(12,"Cargando contenido, por favor espere"),f()()),e&2){let o=U();h(9),B(D(10,1,o.message$))}}var _=class e{loadingService=s(ie);isLoading$=this.loadingService.isLoading$;message$=this.loadingService.message$;static \u0275fac=function(o){return new(o||e)};static \u0275cmp=m({type:e,selectors:[["app-spinner"]],decls:2,vars:3,consts:[["role","status","aria-live","polite",1,"spinner-overlay"],[1,"spinner"],[1,"spinner__animation-wrapper"],[1,"spinner__pokeball"],[1,"spinner__pokeball-top"],[1,"spinner__pokeball-center"],[1,"spinner__pokeball-button"],[1,"spinner__pokeball-bottom"],[1,"spinner__text"],[1,"visually-hidden"]],template:function(o,t){o&1&&(d(0,ge,13,3,"div",0),T(1,"async")),o&2&&c(D(1,1,t.isLoading$)?0:-1)},dependencies:[C,J],styles:[".spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:var(--overlay-bg);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:10000;animation:_ngcontent-%COMP%_spinner-fade-in .2s ease-out forwards}.spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem}.spinner__animation-wrapper[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spinner-bounce 1s ease-in-out infinite;will-change:transform}.spinner__pokeball[_ngcontent-%COMP%]{width:80px;height:80px;position:relative;animation:_ngcontent-%COMP%_spinner-rotate 1.5s linear infinite;will-change:transform}.spinner__pokeball-top[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:50%;background:linear-gradient(180deg,#ff1a1a,#c00);border-radius:80px 80px 0 0;border:4px solid #1a1a2e;border-bottom:none}.spinner__pokeball-bottom[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;height:50%;background:linear-gradient(180deg,#fff,#e0e0e0);border-radius:0 0 80px 80px;border:4px solid #1a1a2e;border-top:none}.spinner__pokeball-center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100%;height:12px;background:#1a1a2e;z-index:1;display:flex;align-items:center;justify-content:center}.spinner__pokeball-button[_ngcontent-%COMP%]{width:24px;height:24px;background:#fff;border:4px solid #1a1a2e;border-radius:50%;animation:_ngcontent-%COMP%_spinner-pulse 1s ease-in-out infinite}.spinner__text[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.5);animation:_ngcontent-%COMP%_spinner-text-pulse 2s ease-in-out infinite}.visually-hidden[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}@keyframes _ngcontent-%COMP%_spinner-fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_spinner-bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-15px)}}@keyframes _ngcontent-%COMP%_spinner-rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_spinner-pulse{0%,to{transform:scale(1);box-shadow:inset 0 0 0 4px #e0e0e0}50%{transform:scale(1.1);box-shadow:inset 0 0 0 4px #fff,0 0 15px #fff6}}@keyframes _ngcontent-%COMP%_spinner-text-pulse{0%,to{opacity:1}50%{opacity:.7}}"],changeDetection:0})};function he(e,n){e&1&&l(0,"app-header")}function be(e,n){e&1&&l(0,"app-footer")}var y=class e{constructor(n,o){this.themeService=n;this.router=o;this.router.events.pipe(L(t=>t instanceof q)).subscribe(t=>{let i=t.urlAfterRedirects,a=!this.isValidRoute(i);this.showLayout=!this.hiddenLayoutRoutes.includes(i)&&!a,this.showFooter=!this.hiddenFooterRoutes.some(r=>i.startsWith(r))&&!a})}hiddenLayoutRoutes=["/login","/register"];hiddenFooterRoutes=["/login","/register","/profile","/settings","/quiz/review"];validRoutes=["/","/pokedex","/pokemon","/login","/register","/profile","/settings","/quiz","/comparador","/style-guide","/forms-demo"];showLayout=!0;showFooter=!0;isValidRoute(n){return this.validRoutes.some(o=>o==="/"?n==="/":n===o||n.startsWith(o+"/"))}static \u0275fac=function(o){return new(o||e)(E(se),E(p))};static \u0275cmp=m({type:e,selectors:[["app-root"]],decls:5,vars:2,template:function(o,t){o&1&&(d(0,he,1,0,"app-header"),l(1,"router-outlet"),d(2,be,1,0,"app-footer"),l(3,"app-toast")(4,"app-spinner")),o&2&&(c(t.showLayout?0:-1),h(2),c(t.showLayout&&t.showFooter?2:-1))},dependencies:[C,ee,pe,me,P,_],encapsulation:2})};Y(y,ce).catch(e=>console.error(e));
