import{a as N}from"./chunk-C2HK2VF6.js";import{Ab as O,Cb as M,Ha as w,Ib as F,K as H,Ma as P,Tb as A,V as p,W as m,Wa as C,X as D,Xa as E,Za as S,ab as B,ba as L,bb as U,gb as c,hb as a,ib as Y,kc as Q,mb as b,na as V,nb as T,ob as z,pb as h,qb as l,tb as x,ub as k,vb as y,xa as R,xb as I,ya as g,yb as _,za as r}from"./chunk-T5NAX3A2.js";var j=["optionsContainer"],W=["scrollbarTrack"],$=(s,e)=>e.value;function q(s,e){if(s&1){let t=b();c(0,"button",12),h("click",function(){let i=p(t).$implicit,n=l(2);return m(n.selectOption(i))}),O(1),a()}if(s&2){let t=e.$implicit,o=l(2);_("custom-select__option--selected",t.value===o.value)("custom-select__option--disabled",t.disabled),T("disabled",t.disabled),C("aria-selected",t.value===o.value),r(),M(" ",t.label," ")}}function K(s,e){if(s&1){let t=b();c(0,"div",13,1),h("click",function(i){p(t);let n=l(2);return m(n.onScrollbarTrackClick(i))}),c(2,"div",14),h("mousedown",function(i){p(t);let n=l(2);return m(n.onScrollbarMouseDown(i))})("touchstart",function(i){p(t);let n=l(2);return m(n.onScrollbarTouchStart(i))}),a()()}if(s&2){let t=l(2);r(2),I("height",t.scrollThumbHeight,"%")("top",t.scrollThumbPosition,"%")}}function J(s,e){if(s&1){let t=b();c(0,"div",7)(1,"div",8)(2,"div",9,0),h("scroll",function(i){p(t);let n=l();return m(n.onOptionsScroll(i))}),B(4,q,2,7,"button",10,$),a(),E(6,K,3,4,"div",11),a()()}if(s&2){let t=l();r(),_("custom-select__options-wrapper--scrolled-top",t.isScrolledFromTop)("custom-select__options-wrapper--scrolled-bottom",t.isScrolledToBottom)("custom-select__options-wrapper--no-scroll",!t.hasScroll),r(3),U(t.options),r(2),S(t.hasScroll?6:-1)}}var G=class s{constructor(e,t){this.elementRef=e;this.cdr=t;this.boundOnMouseMove=this.onMouseMove.bind(this),this.boundOnMouseUp=this.onMouseUp.bind(this),this.boundOnTouchMove=this.onTouchMove.bind(this),this.boundOnTouchEnd=this.onTouchEnd.bind(this)}selectId="";name="";placeholder="---";options=[];disabled=!1;hasError=!1;valueChange=new L;optionsContainer;scrollbarTrack;isOpen=!1;openUpward=!1;value="";isScrolledFromTop=!1;isScrolledToBottom=!1;hasScroll=!1;scrollThumbHeight=30;scrollThumbPosition=0;isDragging=!1;dragStartY=0;dragStartScrollTop=0;boundOnMouseMove;boundOnMouseUp;boundOnTouchMove;boundOnTouchEnd;onChange=()=>{};onTouched=()=>{};needsScrollCheck=!1;ngOnDestroy(){this.removeGlobalListeners()}onDocumentClick(e){this.elementRef.nativeElement.contains(e.target)||(this.isOpen=!1)}onEscapeKey(){this.isOpen=!1}onWindowResize(){if(!this.isOpen)return;let e=this.elementRef.nativeElement.getBoundingClientRect(),t=window.innerHeight-e.bottom,o=220;this.openUpward=t<o}ngAfterViewChecked(){this.needsScrollCheck&&this.optionsContainer&&(setTimeout(()=>{this.checkScrollState(),this.cdr.detectChanges()},0),this.needsScrollCheck=!1)}writeValue(e){this.value=e??""}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}toggleDropdown(){if(!this.disabled){if(!this.isOpen){let e=this.elementRef.nativeElement.getBoundingClientRect(),t=window.innerHeight-e.bottom,o=220;this.openUpward=t<o,this.needsScrollCheck=!0,this.isScrolledFromTop=!1,this.isScrolledToBottom=!1}this.isOpen=!this.isOpen,this.isOpen||this.onTouched()}}selectOption(e){e.disabled||(this.value=e.value,this.isOpen=!1,this.onChange(this.value),this.onTouched(),this.valueChange.emit(this.value))}onOptionsScroll(e){let t=e.target;this.updateScrollState(t)}onScrollbarMouseDown(e){e.preventDefault(),e.stopPropagation(),this.startDrag(e.clientY),document.addEventListener("mousemove",this.boundOnMouseMove),document.addEventListener("mouseup",this.boundOnMouseUp)}onScrollbarTouchStart(e){e.preventDefault(),e.stopPropagation();let t=e.touches[0];this.startDrag(t.clientY),document.addEventListener("touchmove",this.boundOnTouchMove,{passive:!1}),document.addEventListener("touchend",this.boundOnTouchEnd)}onScrollbarTrackClick(e){let t=e.target;if(t.className&&t.className.includes("custom-select__scrollbar-thumb")||!this.optionsContainer?.nativeElement||!this.scrollbarTrack?.nativeElement)return;let i=this.scrollbarTrack.nativeElement.getBoundingClientRect(),n=e.clientY-i.top,d=i.height,v=n/d,u=this.optionsContainer.nativeElement,f=u.scrollHeight-u.clientHeight;u.scrollTop=v*f,this.updateScrollState(u)}startDrag(e){this.isDragging=!0,this.dragStartY=e,this.optionsContainer?.nativeElement&&(this.dragStartScrollTop=this.optionsContainer.nativeElement.scrollTop)}onMouseMove(e){this.isDragging&&(e.preventDefault(),this.handleDrag(e.clientY))}onTouchMove(e){if(!this.isDragging)return;e.preventDefault();let t=e.touches[0];this.handleDrag(t.clientY)}handleDrag(e){if(!this.optionsContainer?.nativeElement||!this.scrollbarTrack?.nativeElement)return;let t=this.optionsContainer.nativeElement,i=this.scrollbarTrack.nativeElement.clientHeight,n=e-this.dragStartY,d=t.scrollHeight-t.clientHeight,v=i*this.scrollThumbHeight/100,u=i-v,f=n/u*d;t.scrollTop=this.dragStartScrollTop+f,this.updateScrollState(t)}onMouseUp(){this.endDrag(),document.removeEventListener("mousemove",this.boundOnMouseMove),document.removeEventListener("mouseup",this.boundOnMouseUp)}onTouchEnd(){this.endDrag(),document.removeEventListener("touchmove",this.boundOnTouchMove),document.removeEventListener("touchend",this.boundOnTouchEnd)}endDrag(){this.isDragging=!1}removeGlobalListeners(){document.removeEventListener("mousemove",this.boundOnMouseMove),document.removeEventListener("mouseup",this.boundOnMouseUp),document.removeEventListener("touchmove",this.boundOnTouchMove),document.removeEventListener("touchend",this.boundOnTouchEnd)}checkScrollState(){if(this.optionsContainer?.nativeElement){let e=this.optionsContainer.nativeElement;if(this.hasScroll=e.scrollHeight>e.clientHeight,this.hasScroll){let t=e.scrollHeight,o=e.clientHeight;this.scrollThumbHeight=Math.max(o/t*100,15),this.scrollThumbPosition=0,this.isScrolledFromTop=!1,this.isScrolledToBottom=!1}}}updateScrollState(e){let t=e.scrollTop,o=e.scrollHeight,i=e.clientHeight,n=5;if(this.isScrolledFromTop=t>n,this.isScrolledToBottom=t+i>=o-n,o>i){this.scrollThumbHeight=Math.max(i/o*100,15);let d=o-i,v=d>0?t/d:0;this.scrollThumbPosition=v*(100-this.scrollThumbHeight)}}get selectedLabel(){let e=this.options.find(t=>t.value===this.value);return e?e.label:this.placeholder}get hasValue(){return this.value!==""&&this.value!==null&&this.value!==void 0}static \u0275fac=function(t){return new(t||s)(w(V),w(A))};static \u0275cmp=P({type:s,selectors:[["app-custom-select"]],viewQuery:function(t,o){if(t&1&&(x(j,5),x(W,5)),t&2){let i;k(i=y())&&(o.optionsContainer=i.first),k(i=y())&&(o.scrollbarTrack=i.first)}},hostBindings:function(t,o){t&1&&z("click",function(n){return o.onDocumentClick(n)},g)("keydown.escape",function(){return o.onEscapeKey()},g)("resize",function(){return o.onWindowResize()},R)},inputs:{selectId:"selectId",name:"name",placeholder:"placeholder",options:"options",disabled:"disabled",hasError:"hasError"},outputs:{valueChange:"valueChange"},features:[F([{provide:N,useExisting:H(()=>s),multi:!0}])],decls:7,vars:18,consts:[["optionsContainer",""],["scrollbarTrack",""],[1,"custom-select"],["type","button",1,"custom-select__trigger",3,"click","disabled"],[1,"custom-select__value"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"custom-select__arrow"],["d","M6 9l6 6 6-6"],["role","listbox",1,"custom-select__dropdown"],[1,"custom-select__options-wrapper"],[1,"custom-select__options",3,"scroll"],["type","button","role","option",1,"custom-select__option",3,"custom-select__option--selected","custom-select__option--disabled","disabled"],[1,"custom-select__scrollbar"],["type","button","role","option",1,"custom-select__option",3,"click","disabled"],[1,"custom-select__scrollbar",3,"click"],[1,"custom-select__scrollbar-thumb",3,"mousedown","touchstart"]],template:function(t,o){t&1&&(c(0,"div",2)(1,"button",3),h("click",function(){return o.toggleDropdown()}),c(2,"span",4),O(3),a(),D(),c(4,"svg",5),Y(5,"path",6),a()(),E(6,J,7,7,"div",7),a()),t&2&&(_("custom-select--open",o.isOpen)("custom-select--upward",o.openUpward)("custom-select--disabled",o.disabled)("custom-select--error",o.hasError)("custom-select--filled",o.hasValue),r(),T("disabled",o.disabled),C("id",o.selectId)("aria-expanded",o.isOpen)("aria-haspopup","listbox"),r(),_("custom-select__value--placeholder",!o.hasValue),r(),M(" ",o.selectedLabel," "),r(3),S(o.isOpen?6:-1))},dependencies:[Q],styles:[`.custom-select{position:relative;width:100%}.custom-select__trigger{display:flex;align-items:center;justify-content:space-between;width:100%;padding:.75rem 2rem .75rem .75rem;font-size:.875rem;font-family:inherit;color:#fff;background:#374151;border:2px solid transparent;border-radius:.5rem;cursor:pointer;transition:all .2s ease;text-align:left;min-height:44px}.custom-select__trigger:hover:not(:disabled){border-color:#ffffff4d}.custom-select__trigger:focus{outline:none;border-color:#30a7d7;box-shadow:0 0 0 2px #30a7d74d}.custom-select__trigger:disabled{opacity:.5;cursor:not-allowed}.custom-select__value{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.custom-select__value--placeholder{color:#ffffff80}.custom-select__arrow{position:absolute;right:.75rem;width:20px;height:20px;color:#fff;transition:transform .2s ease;pointer-events:none}.custom-select__dropdown{position:absolute;top:calc(100% + 4px);left:0;min-width:100%;width:max-content;z-index:100;background:#374151;border:1px solid rgba(255,255,255,.2);border-radius:.5rem;box-shadow:0 10px 25px #0000004d;animation:dropdownOpen .15s ease-out}.custom-select__options-wrapper{position:relative}.custom-select__options-wrapper:before{content:"";position:absolute;top:0;left:0;right:10px;height:24px;background:linear-gradient(to bottom,#374151 0% 20%,#37415100);border-radius:.5rem .5rem 0 0;z-index:2;pointer-events:none;opacity:0;transition:opacity .2s ease}.custom-select__options-wrapper:after{content:"";position:absolute;bottom:0;left:0;right:10px;height:24px;background:linear-gradient(to top,#374151 0% 20%,#37415100);border-radius:0 0 .5rem .5rem;z-index:2;pointer-events:none;opacity:1;transition:opacity .2s ease}.custom-select__options-wrapper--scrolled-top:before{opacity:1}.custom-select__options-wrapper--scrolled-bottom:after{opacity:0}.custom-select__options-wrapper--no-scroll:before,.custom-select__options-wrapper--no-scroll:after{opacity:0}.custom-select__options{max-height:200px;overflow-y:scroll;padding:.25rem;padding-right:18px}.custom-select__options::-webkit-scrollbar{width:0;display:none}.custom-select__options{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch}.custom-select__scrollbar{position:absolute;top:4px;right:6px;bottom:4px;width:6px;background:#4b5563;border-radius:3px;z-index:3}.custom-select__scrollbar-thumb{position:absolute;width:100%;background:#ffffff80;border-radius:3px;min-height:30px;cursor:pointer;transition:background .15s ease}.custom-select__scrollbar-thumb:hover{background:#ffffffb3}.custom-select__option{display:block;width:100%;padding:.5rem .75rem;font-size:.875rem;font-family:inherit;color:#fff;background:transparent;border:none;border-radius:.375rem;cursor:pointer;text-align:left;transition:background .15s ease;white-space:nowrap;overflow:visible}.custom-select__option:hover:not(:disabled){background:#ffffff1a}.custom-select__option--selected{background:#30a7d7;color:#fff}.custom-select__option--selected:hover:not(:disabled){background:#2896c4}.custom-select__option--disabled{opacity:.5;cursor:not-allowed}.custom-select--open .custom-select__arrow{transform:rotate(180deg)}.custom-select--open .custom-select__trigger{border-color:#30a7d7}.custom-select--error .custom-select__trigger{border-color:#ef4444}.custom-select--error .custom-select__trigger:focus{border-color:#ef4444;box-shadow:0 0 0 2px #ef44444d}.custom-select--disabled .custom-select__trigger{opacity:.5;cursor:not-allowed}.custom-select--upward .custom-select__dropdown{top:auto;bottom:calc(100% + 4px);animation:dropdownOpenUpward .15s ease-out}.custom-select--upward .custom-select__options-wrapper:before{opacity:1}.custom-select--upward .custom-select__options-wrapper:after{opacity:0}.custom-select--upward .custom-select__options-wrapper--scrolled-top:before{opacity:1}.custom-select--upward .custom-select__options-wrapper--scrolled-bottom:after{opacity:1}@keyframes dropdownOpen{0%{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}@keyframes dropdownOpenUpward{0%{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
`],encapsulation:2})};export{G as a};
