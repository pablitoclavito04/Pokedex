import{a as A}from"./chunk-YDJ6CNQJ.js";import{c as Q,e as I}from"./chunk-KST2ODYT.js";import{$a as P,Ab as k,Ga as p,La as z,Pb as w,W as _,Wa as g,X as u,Y as C,Ya as h,Za as q,ab as M,fb as i,fc as E,gb as o,hb as y,kb as f,lb as b,nb as d,nc as S,ob as c,ub as O,vb as v,xb as s,ya as a,yb as m}from"./chunk-7PQTO6SL.js";function L(l,t){l&1&&(i(0,"div",9)(1,"p",11),s(2,"Cargando preguntas..."),o()())}function T(l,t){if(l&1){let e=f();i(0,"button",20),d("click",function(){let r=_(e).$index,x=c(2);return u(x.selectAnswer(r))}),i(1,"span",21),s(2),o(),i(3,"span",22),s(4),o()()}if(l&2){let e=t.$implicit,n=t.$index,r=c(2);v("quiz-play__option--selected",r.isSelected(n)),a(2),m(r.getOptionLetter(n)),a(2),m(e)}}function V(l,t){if(l&1){let e=f();i(0,"div",12)(1,"h2",13),s(2),o(),i(3,"div",14),P(4,T,5,4,"button",15,q),o()(),i(6,"div",16)(7,"button",17),d("click",function(){_(e);let r=c();return u(r.nextQuestion())}),i(8,"span"),s(9),o(),C(),i(10,"svg",18),y(11,"path",19),o()()()}if(l&2){let e=c();a(2),m(e.currentQuestion.question),a(2),M(e.currentQuestion.options),a(3),b("disabled",e.selectedAnswer===null),a(2),m(e.currentQuestionIndex<e.totalQuestions-1?"Siguiente pregunta":"Ver resultados")}}function j(l,t){if(l&1){let e=f();i(0,"div",23),d("click",function(){_(e);let r=c();return u(r.closeExitModal())}),i(1,"div",24),d("click",function(r){return _(e),u(r.stopPropagation())}),i(2,"p",25),s(3,"\xA1Cuidado! Si sales ahora perder\xE1s tu progreso."),y(4,"br"),s(5,"\xBFSeguro que quieres salir?"),o(),i(6,"div",26)(7,"button",27),d("click",function(){_(e);let r=c();return u(r.confirmExit())}),s(8," Salir "),o(),i(9,"button",28),d("click",function(){_(e);let r=c();return u(r.closeExitModal())}),s(10," Continuar "),o()()()()}}var R=class l{constructor(t,e,n,r,x){this.router=t;this.route=e;this.http=n;this.cdr=r;this.loadingService=x}difficulty="normal";totalQuestions=10;currentQuestionIndex=0;score=0;selectedAnswer=null;showExitModal=!1;isLoading=!0;isFinishing=!1;questions=[];answerHistory=[];STORAGE_KEY="quiz_state";RESULTS_KEY="quiz_results";ngOnInit(){this.route.queryParams.subscribe(t=>{this.difficulty=t.difficulty||"normal",this.totalQuestions=parseInt(t.questions)||10;let e=this.loadState();e&&e.difficulty===this.difficulty&&e.totalQuestions===this.totalQuestions?(this.questions=e.questions,this.currentQuestionIndex=e.currentQuestionIndex,this.score=e.score,this.selectedAnswer=e.selectedAnswer,this.answerHistory=e.answerHistory||[],this.isLoading=!1,this.cdr.detectChanges()):this.loadQuestions()})}ngOnDestroy(){}loadQuestions(){this.isLoading=!0,this.http.get("assets/data/quiz-questions.json").subscribe({next:t=>{let n=[...t[this.difficulty]||t.normal].sort(()=>Math.random()-.5);this.questions=n.slice(0,Math.min(this.totalQuestions,n.length)),this.answerHistory=[],this.isLoading=!1,this.saveState(),this.cdr.detectChanges()},error:t=>{console.error("Error cargando preguntas:",t),this.isLoading=!1,this.router.navigate(["/quiz"])}})}saveState(){let t={difficulty:this.difficulty,totalQuestions:this.totalQuestions,questions:this.questions,currentQuestionIndex:this.currentQuestionIndex,score:this.score,selectedAnswer:this.selectedAnswer,answerHistory:this.answerHistory};sessionStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}loadState(){let t=sessionStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t):null}clearState(){sessionStorage.removeItem(this.STORAGE_KEY)}saveResults(){let t={answerHistory:this.answerHistory,score:this.score,totalQuestions:this.totalQuestions,difficulty:this.difficulty};sessionStorage.setItem(this.RESULTS_KEY,JSON.stringify(t))}get currentQuestion(){return this.questions[this.currentQuestionIndex]||null}get progressPercentage(){return(this.currentQuestionIndex+1)/this.totalQuestions*100}selectAnswer(t){this.selectedAnswer=t,this.saveState()}nextQuestion(){if(this.selectedAnswer===null||!this.currentQuestion)return;let t=this.selectedAnswer===this.currentQuestion.correctAnswer;this.answerHistory.push({question:this.currentQuestion,userAnswer:this.selectedAnswer,isCorrect:t}),t&&this.score++,this.currentQuestionIndex<this.questions.length-1?(this.currentQuestionIndex++,this.selectedAnswer=null,this.saveState()):(this.isFinishing=!0,this.loadingService.show("Calculando resultados..."),document.body.style.overflow="hidden",this.saveResults(),this.clearState(),setTimeout(()=>{document.body.style.overflow="",this.loadingService.hide(),this.router.navigate(["/quiz/results"],{queryParams:{score:this.score,total:this.totalQuestions,difficulty:this.difficulty}})},4e3))}getOptionLetter(t){return String.fromCharCode(65+t)}isSelected(t){return this.selectedAnswer===t}goBack(){this.router.navigate(["/quiz"])}openExitModal(){this.showExitModal=!0}closeExitModal(){this.showExitModal=!1}confirmExit(){this.showExitModal=!1,this.clearState(),this.router.navigate(["/quiz"])}static \u0275fac=function(e){return new(e||l)(p(I),p(Q),p(S),p(w),p(A))};static \u0275cmp=z({type:l,selectors:[["app-quiz-play"]],decls:15,vars:8,consts:[[1,"quiz-play"],[1,"quiz-play__exit-btn",3,"click","disabled"],[1,"quiz-play__card"],[1,"quiz-play__header"],[1,"quiz-play__title"],[1,"quiz-play__progress"],[1,"quiz-play__progress-bar"],[1,"quiz-play__progress-fill"],[1,"quiz-play__progress-text"],[1,"quiz-play__content","quiz-play__content--loading"],[1,"quiz-play__modal-overlay"],[1,"quiz-play__loading-text"],[1,"quiz-play__content"],[1,"quiz-play__question"],[1,"quiz-play__options"],[1,"quiz-play__option",3,"quiz-play__option--selected"],[1,"quiz-play__footer"],[1,"quiz-play__next-btn",3,"click","disabled"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M5 12h14M12 5l7 7-7 7"],[1,"quiz-play__option",3,"click"],[1,"quiz-play__option-letter"],[1,"quiz-play__option-text"],[1,"quiz-play__modal-overlay",3,"click"],[1,"quiz-play__modal",3,"click"],[1,"quiz-play__modal-text"],[1,"quiz-play__modal-actions"],[1,"quiz-play__modal-btn","quiz-play__modal-btn--exit",3,"click"],[1,"quiz-play__modal-btn","quiz-play__modal-btn--continue",3,"click"]],template:function(e,n){e&1&&(i(0,"main",0)(1,"button",1),d("click",function(){return n.openExitModal()}),s(2," Salir del Quiz "),o(),i(3,"section",2)(4,"div",3)(5,"h1",4),s(6,"Quiz Pokemon"),o(),i(7,"div",5)(8,"div",6),y(9,"div",7),o(),i(10,"span",8),s(11),o()()(),g(12,L,3,0,"div",9),g(13,V,12,3),o(),g(14,j,11,0,"div",10),o()),e&2&&(a(),b("disabled",n.isFinishing),a(8),O("width",n.progressPercentage,"%"),a(2),k("",n.currentQuestionIndex+1,"/",n.totalQuestions),a(),h(n.isLoading?12:-1),a(),h(!n.isLoading&&n.currentQuestion&&!n.isFinishing?13:-1),a(),h(n.showExitModal?14:-1))},dependencies:[E],styles:['.quiz-play[_ngcontent-%COMP%]{min-height:100vh;background:url(/Pokedex/Imagen\\ quiz.png) no-repeat center center;background-size:cover;padding:1rem;padding-top:75px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;position:relative}.quiz-play[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:#0009;z-index:0}@media(min-width:768px){.quiz-play[_ngcontent-%COMP%]{padding:2rem;padding-top:75px}}.quiz-play__card[_ngcontent-%COMP%]{max-width:500px;width:100%;background:#e2e8f0;border:2px dashed var(--border-secondary);border-radius:1rem;overflow:hidden;box-shadow:0 10px 40px #0000001a;position:relative;z-index:1}.dark-theme[_nghost-%COMP%]   .quiz-play__card[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .quiz-play__card[_ngcontent-%COMP%]{background:#1c2739}.quiz-play__header[_ngcontent-%COMP%]{padding:.75rem}@media(min-width:768px){.quiz-play__header[_ngcontent-%COMP%]{padding:1rem}}.quiz-play__title[_ngcontent-%COMP%]{font-family:Poppins,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:1.25rem;font-weight:700;color:var(--text-primary);margin:0 0 .75rem;text-align:center}@media(min-width:768px){.quiz-play__title[_ngcontent-%COMP%]{font-size:1.5rem}}.quiz-play__progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding-bottom:.75rem;border-bottom:2px solid #b0bac7}.dark-theme[_nghost-%COMP%]   .quiz-play__progress[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .quiz-play__progress[_ngcontent-%COMP%]{border-bottom-color:#fff3}.quiz-play__progress-bar[_ngcontent-%COMP%]{flex:1;height:12px;background:#c1ccd9;border-radius:9999px;overflow:hidden}.dark-theme[_nghost-%COMP%]   .quiz-play__progress-bar[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .quiz-play__progress-bar[_ngcontent-%COMP%]{background:#ffffff26}.quiz-play__progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#22c55e,#16a34a);border-radius:9999px;transition:width .3s ease}.quiz-play__progress-text[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--text-secondary);min-width:40px;text-align:right}.quiz-play__question-count[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-tertiary);margin:0}.quiz-play__content[_ngcontent-%COMP%]{padding:.75rem}@media(min-width:768px){.quiz-play__content[_ngcontent-%COMP%]{padding:1rem}}.quiz-play__content--loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:150px}.quiz-play__loading-text[_ngcontent-%COMP%]{font-family:Poppins,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:1.25rem;color:var(--text-secondary);text-align:center}.quiz-play__question[_ngcontent-%COMP%]{font-family:Poppins,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:.875rem;font-weight:600;color:var(--text-primary);margin:0 0 .75rem;line-height:1.4;text-align:center}@media(min-width:768px){.quiz-play__question[_ngcontent-%COMP%]{font-size:1rem}}.quiz-play__options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.quiz-play__option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem;background:var(--bg-primary);border:2px solid #b0bac7;border-radius:.5rem;cursor:pointer;transition:all .2s ease;text-align:left}.dark-theme[_nghost-%COMP%]   .quiz-play__option[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .quiz-play__option[_ngcontent-%COMP%]{background:#2f4467;border-color:var(--border-primary)}.quiz-play__option[_ngcontent-%COMP%]:hover:not(:disabled):not(.quiz-play__option--selected){border-color:#8a95a5;background:var(--bg-secondary)}.dark-theme[_nghost-%COMP%]   .quiz-play__option[_ngcontent-%COMP%]:hover:not(:disabled):not(.quiz-play__option--selected), .dark-theme   [_nghost-%COMP%]   .quiz-play__option[_ngcontent-%COMP%]:hover:not(:disabled):not(.quiz-play__option--selected){border-color:var(--border-secondary)}.quiz-play__option[_ngcontent-%COMP%]:disabled{cursor:default}.quiz-play__option--selected[_ngcontent-%COMP%]{border-color:#64748b;background:#d1d5db}.quiz-play__option--selected[_ngcontent-%COMP%]   .quiz-play__option-letter[_ngcontent-%COMP%]{background:#475569;color:#fff}.dark-theme[_nghost-%COMP%]   .quiz-play__option--selected[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .quiz-play__option--selected[_ngcontent-%COMP%]{border-color:#94a3b8;background:#3d5a80}.dark-theme[_nghost-%COMP%]   .quiz-play__option--selected[_ngcontent-%COMP%]   .quiz-play__option-letter[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .quiz-play__option--selected[_ngcontent-%COMP%]   .quiz-play__option-letter[_ngcontent-%COMP%]{background:#cbd5e1;color:#1e293b}.quiz-play__option-letter[_ngcontent-%COMP%]{width:28px;height:28px;display:flex;align-items:center;justify-content:center;background:var(--bg-tertiary);border-radius:.375rem;font-size:.75rem;font-weight:700;color:var(--text-primary);flex-shrink:0;transition:all .2s ease}@media(min-width:768px){.quiz-play__option-letter[_ngcontent-%COMP%]{width:32px;height:32px;font-size:.875rem}}.quiz-play__option-text[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-primary);transition:all .2s ease;word-wrap:break-word;overflow-wrap:break-word;flex:1;min-width:0}@media(min-width:768px){.quiz-play__option-text[_ngcontent-%COMP%]{font-size:.875rem}}.quiz-play__footer[_ngcontent-%COMP%]{padding:.75rem;padding-top:0}@media(min-width:768px){.quiz-play__footer[_ngcontent-%COMP%]{padding:1rem;padding-top:0}}.quiz-play__next-btn[_ngcontent-%COMP%]{width:100%;display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.5rem 1rem;font-size:.875rem;font-weight:700;color:#fff;background:#22c55e;border:none;border-radius:.5rem;cursor:pointer;transition:all .3s ease}.dark-theme[_nghost-%COMP%]   .quiz-play__next-btn[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .quiz-play__next-btn[_ngcontent-%COMP%]{background:#1b9d4a}@media(min-width:768px){.quiz-play__next-btn[_ngcontent-%COMP%]{font-size:.875rem;padding:.75rem 1.5rem}}.quiz-play__next-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#1a9a49;transform:translateY(-2px)}.dark-theme[_nghost-%COMP%]   .quiz-play__next-btn[_ngcontent-%COMP%]:hover:not(:disabled), .dark-theme   [_nghost-%COMP%]   .quiz-play__next-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#147135}.quiz-play__next-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none}.quiz-play__next-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;transition:transform .3s ease}@media(min-width:768px){.quiz-play__next-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}}.quiz-play__next-btn[_ngcontent-%COMP%]:hover:not(:disabled)   svg[_ngcontent-%COMP%]{transform:translate(4px)}.quiz-play__exit-btn[_ngcontent-%COMP%]{position:absolute;top:1rem;left:1rem;padding:.75rem 1.5rem;font-size:.875rem;font-weight:700;color:#fff;background:#ef4444;border:none;border-radius:.75rem;cursor:pointer;transition:all .3s ease;z-index:10}.dark-theme[_nghost-%COMP%]   .quiz-play__exit-btn[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .quiz-play__exit-btn[_ngcontent-%COMP%]{background:#ca0b0b}@media(min-width:768px){.quiz-play__exit-btn[_ngcontent-%COMP%]{font-size:1rem;padding:1rem 2rem;top:1.5rem;left:1.5rem}}.quiz-play__exit-btn[_ngcontent-%COMP%]:hover{background:#eb1515;transform:translateY(-2px)}.dark-theme[_nghost-%COMP%]   .quiz-play__exit-btn[_ngcontent-%COMP%]:hover, .dark-theme   [_nghost-%COMP%]   .quiz-play__exit-btn[_ngcontent-%COMP%]:hover{background:#9a0808}.quiz-play__modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:100}.quiz-play__modal[_ngcontent-%COMP%]{background:var(--bg-primary);border-radius:1rem;padding:1.5rem;max-width:400px;width:90%;text-align:center;box-shadow:0 10px 40px #0000004d}.dark-theme[_nghost-%COMP%]   .quiz-play__modal[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .quiz-play__modal[_ngcontent-%COMP%]{background:#1c2739}.quiz-play__modal-text[_ngcontent-%COMP%]{font-family:Poppins,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:1rem;font-weight:600;color:var(--text-primary);margin:0 0 1.5rem;line-height:1.4}.quiz-play__modal-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;justify-content:center}.quiz-play__modal-btn[_ngcontent-%COMP%]{flex:1;padding:.75rem 1.5rem;font-size:.875rem;font-weight:700;border:none;border-radius:.75rem;cursor:pointer;transition:all .3s ease}@media(min-width:768px){.quiz-play__modal-btn[_ngcontent-%COMP%]{font-size:1rem;padding:1rem 2rem}}.quiz-play__modal-btn--exit[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.dark-theme[_nghost-%COMP%]   .quiz-play__modal-btn--exit[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .quiz-play__modal-btn--exit[_ngcontent-%COMP%]{background:#ca0b0b}.quiz-play__modal-btn--exit[_ngcontent-%COMP%]:hover{background:#eb1515}.dark-theme[_nghost-%COMP%]   .quiz-play__modal-btn--exit[_ngcontent-%COMP%]:hover, .dark-theme   [_nghost-%COMP%]   .quiz-play__modal-btn--exit[_ngcontent-%COMP%]:hover{background:#9a0808}.quiz-play__modal-btn--continue[_ngcontent-%COMP%]{background:#22c55e;color:#fff}.dark-theme[_nghost-%COMP%]   .quiz-play__modal-btn--continue[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .quiz-play__modal-btn--continue[_ngcontent-%COMP%]{background:#1b9d4a}.quiz-play__modal-btn--continue[_ngcontent-%COMP%]:hover{background:#1a9a49}.dark-theme[_nghost-%COMP%]   .quiz-play__modal-btn--continue[_ngcontent-%COMP%]:hover, .dark-theme   [_nghost-%COMP%]   .quiz-play__modal-btn--continue[_ngcontent-%COMP%]:hover{background:#147135}']})};export{R as QuizPlayComponent};
