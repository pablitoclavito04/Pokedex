import{a as v}from"./chunk-24LDPZDB.js";import{b as c,d as u}from"./chunk-LBFJ4IXF.js";import{I as s,M as n,Q as i,h as a}from"./chunk-J6XFDN36.js";var p=class r{constructor(t,e){this.http=t;this.authService=e}apiUrl="https://pokedex-backend-mwcz.onrender.com/api/favoritos";favoritosSubject=new a([]);favoritos$=this.favoritosSubject.asObservable();getHeaders(){let t=this.authService.getToken();return new c({Authorization:`Bearer ${t}`})}cargarFavoritos(){if(!this.authService.isLoggedIn()){this.favoritosSubject.next([]);return}this.http.get(this.apiUrl,{headers:this.getHeaders()}).subscribe({next:t=>this.favoritosSubject.next(t),error:t=>console.error("Error cargando favoritos:",t)})}toggleFavorito(t){return this.http.post(`${this.apiUrl}/toggle/${t}`,{},{headers:this.getHeaders()}).pipe(s(e=>{let o=this.favoritosSubject.getValue();e.esFavorito?this.favoritosSubject.next([t,...o]):this.favoritosSubject.next(o.filter(h=>h!==t))}))}esFavorito(t){return this.favoritosSubject.getValue().includes(t)}getFavoritos(){return this.favoritosSubject.getValue()}static \u0275fac=function(e){return new(e||r)(i(u),i(v))};static \u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})};export{p as a};
