import{a as v}from"./chunk-WLB7BB5W.js";import{I as s,M as n,Q as i,h as a,lc as c,mc as u}from"./chunk-FRE54O45.js";var h=class r{constructor(t,e){this.http=t;this.authService=e}apiUrl="http://localhost:8080/api/favoritos";favoritosSubject=new a([]);favoritos$=this.favoritosSubject.asObservable();getHeaders(){let t=this.authService.getToken();return new c({Authorization:`Bearer ${t}`})}cargarFavoritos(){if(!this.authService.isLoggedIn()){this.favoritosSubject.next([]);return}this.http.get(this.apiUrl,{headers:this.getHeaders()}).subscribe({next:t=>this.favoritosSubject.next(t),error:t=>console.error("Error cargando favoritos:",t)})}toggleFavorito(t){return this.http.post(`${this.apiUrl}/toggle/${t}`,{},{headers:this.getHeaders()}).pipe(s(e=>{let o=this.favoritosSubject.getValue();e.esFavorito?this.favoritosSubject.next([t,...o]):this.favoritosSubject.next(o.filter(p=>p!==t))}))}esFavorito(t){return this.favoritosSubject.getValue().includes(t)}getFavoritos(){return this.favoritosSubject.getValue()}static \u0275fac=function(e){return new(e||r)(i(u),i(v))};static \u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})};export{h as a};
