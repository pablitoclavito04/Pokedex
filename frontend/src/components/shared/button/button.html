<!-- ============================================================================
     BUTTON COMPONENT

     Componente de botón reutilizable con múltiples variantes, tamaños y estados.
     Puede renderizar como <button> o <a> dependiendo de si se proporciona href.

     Variantes: primary, secondary, ghost, danger
     Tamaños: sm, md, lg
     Estados: normal, hover, focus, active, disabled, loading
     ============================================================================ -->

<!-- Captura el contenido proyectado -->
<ng-template #buttonContent>
  <!-- Spinner de carga -->
  @if (loading) {
    <svg
      class="button__spinner"
      viewBox="0 0 24 24"
      fill="none"
      aria-hidden="true">
      <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" opacity="0.3"/>
      <path d="M12 2a10 10 0 0 1 10 10" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
    </svg>
  }

  <!-- Icono izquierdo -->
  @if (iconLeft && !loading) {
    <span class="button__icon button__icon--left" aria-hidden="true">
      @if (iconLeft === 'arrow-left') {
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
      }
      @if (iconLeft === 'plus') {
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 5v14M5 12h14"/>
        </svg>
      }
      @if (iconLeft === 'check') {
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="20 6 9 17 4 12"/>
        </svg>
      }
      @if (iconLeft === 'heart') {
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
        </svg>
      }
      @if (iconLeft === 'trash') {
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="3 6 5 6 21 6"/>
          <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
        </svg>
      }
      @if (iconLeft === 'download') {
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="7 10 12 15 17 10"/>
          <line x1="12" y1="15" x2="12" y2="3"/>
        </svg>
      }
    </span>
  }

  <!-- Contenido del botón (texto) -->
  <span class="button__text">
    <ng-content></ng-content>
  </span>

  <!-- Icono derecho -->
  @if (iconRight && !loading) {
    <span class="button__icon button__icon--right" aria-hidden="true">
      @if (iconRight === 'arrow-right') {
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
      }
      @if (iconRight === 'external') {
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
          <polyline points="15 3 21 3 21 9"/>
          <line x1="10" y1="14" x2="21" y2="3"/>
        </svg>
      }
      @if (iconRight === 'chevron-down') {
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="6 9 12 15 18 9"/>
        </svg>
      }
    </span>
  }
</ng-template>

<!-- Renderiza como enlace si se proporciona href -->
@if (isLink) {
  <a
    [routerLink]="href"
    [class]="buttonClasses"
    [attr.aria-disabled]="disabled || loading"
    [class.button--disabled]="disabled || loading"
    (click)="onClick($event)">
    <ng-container *ngTemplateOutlet="buttonContent"></ng-container>
  </a>
} @else {
  <!-- Renderiza como botón -->
  <button
    [type]="type"
    [class]="buttonClasses"
    [disabled]="disabled || loading"
    [attr.aria-disabled]="disabled || loading"
    [attr.aria-busy]="loading"
    (click)="onClick($event)">
    <ng-container *ngTemplateOutlet="buttonContent"></ng-container>
  </button>
}
