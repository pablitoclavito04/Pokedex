<div class="eventos-demo">
  <!-- ============================================================================ -->
  <!--                    HEADER                                                    -->
  <!-- ============================================================================ -->
  <header class="eventos-demo__header">
    <h1 class="eventos-demo__title">Demostraci√≥n de R√∫bricas 2.2, 2.3 y 2.4</h1>
    <p class="eventos-demo__subtitle">
      Eventos de Teclado/Mouse/Focus, Prevenci√≥n de Eventos y @HostListener
    </p>
  </header>

  <!-- ============================================================================ -->
  <!--           R√öBRICA 2.2: EVENTOS DE TECLADO, MOUSE Y FOCUS                    -->
  <!-- ============================================================================ -->
  <section class="eventos-demo__section">
    <div class="eventos-demo__section-header">
      <h2 class="eventos-demo__section-title">
        <span class="badge badge--primary">2.2</span>
        Manejo de Eventos Espec√≠ficos (Teclado, Mouse, Focus)
      </h2>
      <p class="eventos-demo__description">
        Demostraci√≥n interactiva de los 12 eventos requeridos: 5 de teclado, 3 de mouse y 4 de focus.
      </p>
    </div>

    <!-- Panel de estad√≠sticas -->
    <div class="eventos-demo__card">
      <div class="eventos-demo__stats-header">
        <h3>Panel de Eventos en Tiempo Real</h3>
        <button class="btn btn--secondary btn--sm" (click)="resetEventCounts()">
          Resetear Contadores
        </button>
      </div>

      <div class="eventos-demo__stats-grid">
        <!-- Eventos de Teclado -->
        <div class="eventos-demo__stats-category">
          <h4>‚å®Ô∏è Eventos de Teclado</h4>
          <ul class="eventos-demo__stats-list">
            <li>
              <code>(keydown.enter)</code>
              <span class="badge badge--info">{{ eventCounts.keydownEnter }}</span>
            </li>
            <li>
              <code>(keydown.escape)</code>
              <span class="badge badge--info">{{ eventCounts.keydownEscape }}</span>
            </li>
            <li>
              <code>(keydown.arrowup)</code>
              <span class="badge badge--info">{{ eventCounts.keydownArrowUp }}</span>
            </li>
            <li>
              <code>(keydown.arrowdown)</code>
              <span class="badge badge--info">{{ eventCounts.keydownArrowDown }}</span>
            </li>
            <li>
              <code>(keyup)</code>
              <span class="badge badge--info">{{ eventCounts.keyup }}</span>
            </li>
          </ul>
        </div>

        <!-- Eventos de Mouse -->
        <div class="eventos-demo__stats-category">
          <h4>üñ±Ô∏è Eventos de Mouse</h4>
          <ul class="eventos-demo__stats-list">
            <li>
              <code>(click)</code>
              <span class="badge badge--info">{{ eventCounts.click }}</span>
            </li>
            <li>
              <code>(mouseenter)</code>
              <span class="badge badge--info">{{ eventCounts.mouseenter }}</span>
            </li>
            <li>
              <code>(mouseleave)</code>
              <span class="badge badge--info">{{ eventCounts.mouseleave }}</span>
            </li>
          </ul>
        </div>

        <!-- Eventos de Focus -->
        <div class="eventos-demo__stats-category">
          <h4>üéØ Eventos de Focus</h4>
          <ul class="eventos-demo__stats-list">
            <li>
              <code>(focus)</code>
              <span class="badge badge--info">{{ eventCounts.focus }}</span>
            </li>
            <li>
              <code>(blur)</code>
              <span class="badge badge--info">{{ eventCounts.blur }}</span>
            </li>
            <li>
              <code>(focusin)</code>
              <span class="badge badge--info">{{ eventCounts.focusin }}</span>
            </li>
            <li>
              <code>(focusout)</code>
              <span class="badge badge--info">{{ eventCounts.focusout }}</span>
            </li>
          </ul>
        </div>
      </div>

      <div class="eventos-demo__stats-total">
        <strong>Total de eventos registrados:</strong>
        <span class="badge badge--success badge--lg">{{ getTotalEvents() }}</span>
        @if (lastKeyPressed) {
          <span class="eventos-demo__last-key">
            √öltima tecla (keydown): <kbd>{{ lastKeyPressed }}</kbd>
          </span>
        }
        @if (lastKeyUpPressed) {
          <span class="eventos-demo__last-key">
            √öltima tecla (keyup): <kbd>{{ lastKeyUpPressed }}</kbd>
          </span>
        }
      </div>
    </div>

    <!-- √Årea de demostraci√≥n interactiva -->
    <div class="eventos-demo__card">
      <h3>√Årea de Demostraci√≥n Interactiva</h3>

      <!-- Demo de eventos de teclado -->
      <div class="eventos-demo__demo-section">
        <h4>1. Eventos de Teclado</h4>
        <p>Enfoca el input y presiona las teclas indicadas:</p>

        <input
          type="text"
          class="form-input eventos-demo__keyboard-input"
          placeholder="Enf√≥came y presiona Enter, Escape, ‚Üë, ‚Üì o cualquier tecla"
          (keydown.enter)="onKeydownEnter($event)"
          (keydown.escape)="onKeydownEscape($event)"
          (keydown.arrowup)="onKeydownArrowUp($event)"
          (keydown.arrowdown)="onKeydownArrowDown($event)"
          (keyup)="onKeyup($event)"
        />

        <div class="eventos-demo__instructions">
          <ul>
            <li><kbd>Enter</kbd> ‚Üí dispara <code>(keydown.enter)</code></li>
            <li><kbd>Escape</kbd> ‚Üí dispara <code>(keydown.escape)</code></li>
            <li><kbd>‚Üë</kbd> ‚Üí dispara <code>(keydown.arrowup)</code></li>
            <li><kbd>‚Üì</kbd> ‚Üí dispara <code>(keydown.arrowdown)</code></li>
            <li><kbd>Cualquier tecla</kbd> al soltar ‚Üí dispara <code>(keyup)</code></li>
          </ul>
        </div>
      </div>

      <!-- Demo de eventos de mouse -->
      <div class="eventos-demo__demo-section">
        <h4>2. Eventos de Mouse</h4>
        <p>Interact√∫a con la caja de abajo:</p>

        <div
          class="eventos-demo__mouse-box"
          [class.eventos-demo__mouse-box--hovered]="demoBoxHovered"
          (click)="onDemoClick($event)"
          (mouseenter)="onMouseEnter($event)"
          (mouseleave)="onMouseLeave($event)"
        >
          <span>{{ demoBoxHovered ? '¬°Mouse dentro!' : 'Pasa el mouse aqu√≠' }}</span>
          <br>
          <small>(click) (mouseenter) (mouseleave)</small>
        </div>
      </div>

      <!-- Demo de eventos de focus -->
      <div class="eventos-demo__demo-section">
        <h4>3. Eventos de Focus</h4>
        <p>Haz click en los inputs para ver los eventos de focus:</p>

        <div
          class="eventos-demo__focus-container"
          [class.eventos-demo__focus-container--focused]="demoContainerFocused"
          (focusin)="onFocusIn($event)"
          (focusout)="onFocusOut($event)"
        >
          <label>
            Input con (focus) y (blur):
            <input
              type="text"
              class="form-input"
              [class.eventos-demo__input--focused]="demoInputFocused"
              placeholder="Haz click aqu√≠ y luego fuera"
              (focus)="onFocus($event)"
              (blur)="onBlur($event)"
            />
          </label>

          <label>
            Segundo input (para probar focusin/focusout):
            <input
              type="text"
              class="form-input"
              placeholder="Click aqu√≠ para ver focusin/focusout"
            />
          </label>

          <div class="eventos-demo__focus-info">
            <p><strong>Diferencia:</strong></p>
            <ul>
              <li><code>(focus)/(blur)</code> - NO burbujean, solo el elemento espec√≠fico</li>
              <li><code>(focusin)/(focusout)</code> - S√ç burbujean, detectan hijos</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- C√≥digo de ejemplo -->
    <div class="eventos-demo__card">
      <h3>C√≥digo de Implementaci√≥n</h3>

      <div class="eventos-demo__code">
        <h4>Template HTML:</h4>
        <pre><code>&lt;!-- Eventos de teclado --&gt;
&lt;input
  (keydown.enter)="onKeydownEnter($event)"
  (keydown.escape)="onKeydownEscape($event)"
  (keydown.arrowup)="onKeydownArrowUp($event)"
  (keydown.arrowdown)="onKeydownArrowDown($event)"
  (keyup)="onKeyup($event)"
/&gt;

&lt;!-- Eventos de mouse --&gt;
&lt;div
  (click)="onClick($event)"
  (mouseenter)="onMouseEnter($event)"
  (mouseleave)="onMouseLeave($event)"
&gt;

&lt;!-- Eventos de focus --&gt;
&lt;input (focus)="onFocus($event)" (blur)="onBlur($event)" /&gt;
&lt;div (focusin)="onFocusIn($event)" (focusout)="onFocusOut($event)"&gt;</code></pre>

        <h4>Ubicaciones reales en el proyecto:</h4>
        <ul>
          <li><code>(keydown.enter)</code> ‚Üí <code>card.html:18</code>, <code>accordion.ts:145</code></li>
          <li><code>(keydown.escape)</code> ‚Üí <code>modal.ts:85</code>, <code>header.ts:187</code></li>
          <li><code>(keydown.arrowup/down)</code> ‚Üí <code>accordion.ts:116-128</code></li>
          <li><code>(keyup)</code> ‚Üí <code>eventos-demo.ts</code> (esta demo)</li>
          <li><code>(click)</code> ‚Üí M√∫ltiples componentes (30+ usos)</li>
          <li><code>(mouseenter)/(mouseleave)</code> ‚Üí <code>tooltip.ts:98-106</code></li>
          <li><code>(focus)/(blur)</code> ‚Üí <code>form-input.html:105-106</code></li>
          <li><code>(focusin)/(focusout)</code> ‚Üí <code>tooltip.ts:114-122</code></li>
        </ul>
      </div>
    </div>

    <!-- Resumen de r√∫brica 2.2 -->
    <div class="eventos-demo__card">
      <h3>‚úì Resumen R√∫brica 2.2 (10/10)</h3>

      <div class="alert alert--success">
        <strong>12 eventos diferentes implementados:</strong>
      </div>

      <table class="eventos-demo__summary-table">
        <thead>
          <tr>
            <th>Categor√≠a</th>
            <th>Evento</th>
            <th>Ubicaci√≥n</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td rowspan="5">‚å®Ô∏è Teclado</td>
            <td><code>(keydown.enter)</code></td>
            <td>card.html, accordion.ts</td>
          </tr>
          <tr>
            <td><code>(keydown.escape)</code></td>
            <td>modal.ts, header.ts, custom-select.ts</td>
          </tr>
          <tr>
            <td><code>(keydown.arrowup)</code></td>
            <td>accordion.ts</td>
          </tr>
          <tr>
            <td><code>(keydown.arrowdown)</code></td>
            <td>accordion.ts</td>
          </tr>
          <tr>
            <td><code>(keyup)</code></td>
            <td>eventos-demo.ts</td>
          </tr>
          <tr>
            <td rowspan="3">üñ±Ô∏è Mouse</td>
            <td><code>(click)</code></td>
            <td>30+ componentes</td>
          </tr>
          <tr>
            <td><code>(mouseenter)</code></td>
            <td>tooltip.ts</td>
          </tr>
          <tr>
            <td><code>(mouseleave)</code></td>
            <td>tooltip.ts</td>
          </tr>
          <tr>
            <td rowspan="4">üéØ Focus</td>
            <td><code>(focus)</code></td>
            <td>form-input.html, form-select.html</td>
          </tr>
          <tr>
            <td><code>(blur)</code></td>
            <td>form-input.html, form-select.html</td>
          </tr>
          <tr>
            <td><code>(focusin)</code></td>
            <td>tooltip.ts, eventos-demo.ts</td>
          </tr>
          <tr>
            <td><code>(focusout)</code></td>
            <td>tooltip.ts, eventos-demo.ts</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- ============================================================================ -->
  <!--           SECCI√ìN 1: preventDefault() EN FORMULARIO (R√öBRICA 2.3)           -->
  <!-- ============================================================================ -->
  <section class="eventos-demo__section">
    <div class="eventos-demo__section-header">
      <h2 class="eventos-demo__section-title">
        <span class="badge badge--success">2.3</span>
        1. preventDefault() en Formularios
      </h2>
      <p class="eventos-demo__description">
        Sin <code>event.preventDefault()</code>, el formulario recargar√≠a la p√°gina.
        Con √©l, manejamos el env√≠o con JavaScript sin perder el estado.
      </p>
    </div>

    <div class="eventos-demo__card">
      <form class="eventos-demo__form" (ngSubmit)="onFormSubmit($event)">
        <h3>Formulario de Contacto</h3>

        <div class="form-field">
          <label for="nombre">Nombre:</label>
          <input
            type="text"
            id="nombre"
            name="nombre"
            [(ngModel)]="formData.nombre"
            required
            class="form-input">
        </div>

        <div class="form-field">
          <label for="email">Email:</label>
          <input
            type="email"
            id="email"
            name="email"
            [(ngModel)]="formData.email"
            required
            class="form-input">
        </div>

        <div class="form-field">
          <label for="mensaje">Mensaje:</label>
          <textarea
            id="mensaje"
            name="mensaje"
            [(ngModel)]="formData.mensaje"
            rows="3"
            class="form-input"></textarea>
        </div>

        <button type="submit" class="btn btn--primary">
          Enviar Formulario (con preventDefault)
        </button>

        @if (formSubmitted) {
          <div class="alert alert--success">
            ‚úì Formulario enviado {{ submitCount }} vez/veces sin recargar la p√°gina!
            <br>
            <small>C√≥digo: <code>event.preventDefault()</code> en l√≠nea 41</small>
          </div>
        }
      </form>

      <div class="eventos-demo__code">
        <h4>C√≥digo TypeScript:</h4>
        <pre><code>onFormSubmit(event: Event): void &#123;
  // PREVENCI√ìN: Prevenir recarga de p√°gina
  event.preventDefault();

  this.formSubmitted = true;
  this.submitCount++;
  console.log('Formulario enviado:', this.formData);
&#125;</code></pre>

        <h4>Ubicaci√≥n real:</h4>
        <ul>
          <li><code>src/app/pages/login/login.ts</code> l√≠nea 109</li>
          <li><code>src/app/pages/register/register.ts</code> l√≠nea 288</li>
          <li><code>src/app/pages/forms-demo/forms-demo.ts</code> l√≠neas 173 y 319</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- ============================================================================ -->
  <!--      SECCI√ìN 2: stopPropagation() EN MODAL (R√öBRICA 2.3)                    -->
  <!-- ============================================================================ -->
  <section class="eventos-demo__section">
    <div class="eventos-demo__section-header">
      <h2 class="eventos-demo__section-title">
        <span class="badge badge--success">2.3</span>
        2. stopPropagation() en Modal
      </h2>
      <p class="eventos-demo__description">
        Sin <code>event.stopPropagation()</code>, cualquier click dentro del modal lo cerrar√≠a.
        Con √©l, solo los clicks en el overlay oscuro cierran el modal.
      </p>
    </div>

    <div class="eventos-demo__card">
      <button class="btn btn--primary" (click)="openModal()">
        Abrir Modal (demostraci√≥n stopPropagation)
      </button>

      <div class="eventos-demo__instructions">
        <h4>Instrucciones:</h4>
        <ol>
          <li>Haz click en "Abrir Modal"</li>
          <li>Haz click DENTRO del contenido del modal (caja blanca)</li>
          <li>‚úì El modal NO se cierra (gracias a stopPropagation)</li>
          <li>Haz click FUERA del modal (√°rea oscura)</li>
          <li>‚úì El modal S√ç se cierra</li>
        </ol>

        @if (isModalOpen && modalClickCount > 0) {
          <div class="alert alert--info">
            Clicks dentro del modal: {{ modalClickCount }}
            <br>
            <small>El modal sigue abierto gracias a <code>stopPropagation()</code></small>
          </div>
        }
      </div>

      <div class="eventos-demo__code">
        <h4>C√≥digo TypeScript:</h4>
        <pre><code>onModalContentClick(event: MouseEvent): void &#123;
  // PREVENCI√ìN: Detener propagaci√≥n al overlay
  event.stopPropagation();
&#125;</code></pre>

        <h4>Ubicaci√≥n real:</h4>
        <ul>
          <li><code>src/components/shared/modal/modal.ts</code> l√≠nea 74</li>
          <li><code>src/components/shared/modal/modal.html</code> l√≠nea 18</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Modal Component -->
  @if (isModalOpen) {
    <app-modal
      [isOpen]="isModalOpen"
      [title]="'Demostraci√≥n de stopPropagation()'"
      [size]="'md'"
      (closed)="closeModal()">

      <div (click)="onModalInnerClick()" class="modal-demo-content">
        <p><strong>Haz click aqu√≠ dentro del modal</strong></p>
        <p>El modal NO se cerrar√° porque usamos <code>stopPropagation()</code></p>
        <p>Clicks registrados: <strong>{{ modalClickCount }}</strong></p>

        <button class="btn btn--secondary" (click)="onModalInnerClick()">
          Click aqu√≠ (no cierra el modal)
        </button>

        <div class="alert alert--info" style="margin-top: 1rem;">
          <strong>Prueba esto:</strong>
          <ol style="margin-left: 1.5rem;">
            <li>Haz varios clicks en este bot√≥n</li>
            <li>Nota que el contador aumenta</li>
            <li>El modal NO se cierra</li>
            <li>Ahora haz click en el √°rea oscura de fuera</li>
            <li>El modal S√ç se cierra</li>
          </ol>
        </div>
      </div>

      <div modal-footer>
        <button class="btn btn--primary" (click)="closeModal()">
          Cerrar Modal
        </button>
      </div>
    </app-modal>
  }

  <!-- ============================================================================ -->
  <!--  SECCI√ìN 3: @HostListener ESCAPE Y CLICK FUERA (R√öBRICA 2.4)                -->
  <!-- ============================================================================ -->
  <section class="eventos-demo__section">
    <div class="eventos-demo__section-header">
      <h2 class="eventos-demo__section-title">
        <span class="badge badge--warning">2.4</span>
        3. @HostListener('document:keydown.escape')
      </h2>
      <p class="eventos-demo__description">
        Los componentes escuchan eventos globales del documento/ventana usando @HostListener
      </p>
    </div>

    <div class="eventos-demo__card">
      <h3>Abrir el modal y presionar ESC</h3>
      <button class="btn btn--primary" (click)="openModal()">
        Abrir Modal
      </button>

      <div class="alert alert--info">
        <strong>Prueba esto:</strong>
        <ol>
          <li>Abre el modal</li>
          <li>Presiona la tecla <kbd>ESC</kbd></li>
          <li>‚úì El modal se cierra autom√°ticamente</li>
        </ol>
      </div>

      <div class="eventos-demo__code">
        <h4>C√≥digo TypeScript:</h4>
        <pre><code>@HostListener('document:keydown.escape')
onEscapeKey(): void &#123;
  if (this.isOpen && this.closeOnEsc) &#123;
    this.close();
  &#125;
&#125;</code></pre>

        <h4>Ubicaci√≥n real:</h4>
        <ul>
          <li><code>src/components/shared/modal/modal.ts</code> l√≠nea 85</li>
          <li><code>src/components/layout/header/header.ts</code> l√≠nea 187</li>
          <li><code>src/components/shared/custom-select/custom-select.ts</code> l√≠nea 92</li>
          <li><code>src/components/shared/tooltip/tooltip.ts</code> l√≠nea 130</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- ============================================================================ -->
  <!--  SECCI√ìN 4: @HostListener CLICK FUERA (R√öBRICA 2.4)                         -->
  <!-- ============================================================================ -->
  <section class="eventos-demo__section">
    <div class="eventos-demo__section-header">
      <h2 class="eventos-demo__section-title">
        <span class="badge badge--warning">2.4</span>
        4. @HostListener('document:click')
      </h2>
      <p class="eventos-demo__description">
        Los dropdowns se cierran al hacer click fuera de ellos
      </p>
    </div>

    <div class="eventos-demo__card">
      <h3>Custom Select con "Click Fuera"</h3>

      <div class="form-field">
        <label>Selecciona un pa√≠s:</label>
        <app-custom-select
          [selectId]="'country'"
          [options]="countries"
          [(ngModel)]="selectedCountry"
          [placeholder]="'Selecciona un pa√≠s'">
        </app-custom-select>
      </div>

      @if (selectedCountry) {
        <div class="alert alert--success">
          Pa√≠s seleccionado: <strong>{{ selectedCountry }}</strong>
        </div>
      }

      <div class="alert alert--info">
        <strong>Prueba esto:</strong>
        <ol>
          <li>Haz click en el select para abrirlo</li>
          <li>SIN seleccionar nada, haz click fuera del dropdown</li>
          <li>‚úì El dropdown se cierra autom√°ticamente</li>
          <li>Esto funciona gracias a @HostListener('document:click')</li>
        </ol>
      </div>

      <div class="eventos-demo__code">
        <h4>C√≥digo TypeScript:</h4>
        <pre><code>@HostListener('document:click', ['$event'])
onDocumentClick(event: MouseEvent): void &#123;
  if (!this.elementRef.nativeElement.contains(event.target)) &#123;
    this.isOpen = false;
  &#125;
&#125;</code></pre>

        <h4>Ubicaci√≥n real:</h4>
        <ul>
          <li><code>src/components/shared/custom-select/custom-select.ts</code> l√≠nea 84</li>
          <li><code>src/components/layout/header/header.ts</code> l√≠nea 197</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- ============================================================================ -->
  <!--  SECCI√ìN 5: @HostListener WINDOW RESIZE (R√öBRICA 2.4)                       -->
  <!-- ============================================================================ -->
  <section class="eventos-demo__section">
    <div class="eventos-demo__section-header">
      <h2 class="eventos-demo__section-title">
        <span class="badge badge--warning">2.4</span>
        5. @HostListener('window:resize')
      </h2>
      <p class="eventos-demo__description">
        Los componentes se ajustan autom√°ticamente al cambiar el tama√±o de ventana
      </p>
    </div>

    <div class="eventos-demo__card">
      <div class="alert alert--info">
        <strong>Prueba esto:</strong>
        <ol>
          <li>Abre el modal</li>
          <li>Usa las DevTools para simular un dispositivo m√≥vil</li>
          <li>O redimensiona la ventana del navegador</li>
          <li>‚úì El modal se ajusta autom√°ticamente</li>
          <li>Abre el dropdown del select</li>
          <li>Redimensiona la ventana</li>
          <li>‚úì El dropdown se reposiciona si es necesario</li>
        </ol>
      </div>

      <div class="eventos-demo__code">
        <h4>C√≥digo TypeScript:</h4>
        <pre><code>@HostListener('window:resize')
onWindowResize(): void &#123;
  if (!this.isOpen) return;

  // Recalcular posici√≥n del componente
  const rect = this.elementRef.nativeElement.getBoundingClientRect();
  const spaceBelow = window.innerHeight - rect.bottom;

  this.repositionComponent(spaceBelow);
&#125;</code></pre>

        <h4>Ubicaci√≥n real:</h4>
        <ul>
          <li><code>src/components/shared/modal/modal.ts</code> l√≠nea 153</li>
          <li><code>src/components/shared/custom-select/custom-select.ts</code> l√≠nea 102</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- ============================================================================ -->
  <!--  SECCI√ìN 6: ACCORDION CON NAVEGACI√ìN POR TECLADO (R√öBRICA 2.3 + 2.4)        -->
  <!-- ============================================================================ -->
  <section class="eventos-demo__section">
    <div class="eventos-demo__section-header">
      <h2 class="eventos-demo__section-title">
        <span class="badge badge--success">2.3</span>
        <span class="badge badge--warning">2.4</span>
        6. Accordion: preventDefault() + stopPropagation()
      </h2>
      <p class="eventos-demo__description">
        Navegaci√≥n con teclado usando m√∫ltiples t√©cnicas de prevenci√≥n de eventos
      </p>
    </div>

    <div class="eventos-demo__card">
      <h3>Accordion con Navegaci√≥n por Teclado</h3>

      <app-accordion
        [items]="accordionItems"
        [multiple]="false"
        [variant]="'bordered'">
      </app-accordion>

      <div class="alert alert--info">
        <strong>Prueba esto:</strong>
        <ol>
          <li>Haz click en un √≠tem del accordion para enfocarlo</li>
          <li>Usa <kbd>‚Üë</kbd> y <kbd>‚Üì</kbd> para navegar</li>
          <li>‚úì El foco se mueve pero la p√°gina NO hace scroll</li>
          <li>Usa <kbd>Home</kbd> y <kbd>End</kbd></li>
          <li>‚úì Va al primer/√∫ltimo √≠tem sin scroll de p√°gina</li>
          <li>Usa <kbd>Enter</kbd> o <kbd>Espacio</kbd> para abrir/cerrar</li>
          <li>‚úì Funciona sin comportamiento por defecto del navegador</li>
        </ol>
      </div>

      <div class="eventos-demo__code">
        <h4>C√≥digo TypeScript:</h4>
        <pre><code>onKeyDown(event: KeyboardEvent): void &#123;
  switch (event.key) &#123;
    case 'ArrowUp':
      event.preventDefault();      // Evita scroll
      event.stopPropagation();     // Evita propagaci√≥n
      this.moveFocusUp();
      break;
    case 'ArrowDown':
      event.preventDefault();
      event.stopPropagation();
      this.moveFocusDown();
      break;
    // ... Home, End, Enter, Space
  &#125;
&#125;</code></pre>

        <h4>Ubicaci√≥n real:</h4>
        <ul>
          <li><code>src/components/shared/accordion/accordion.ts</code> l√≠neas 107-153</li>
          <li>5 teclas con preventDefault() + stopPropagation()</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- ============================================================================ -->
  <!--  SECCI√ìN 7: M√ÅS CONTEXTOS DE preventDefault() (R√öBRICA 2.3)                 -->
  <!-- ============================================================================ -->
  <section class="eventos-demo__section">
    <div class="eventos-demo__section-header">
      <h2 class="eventos-demo__section-title">
        <span class="badge badge--success">2.3</span>
        7. M√°s Contextos de preventDefault()
      </h2>
      <p class="eventos-demo__description">
        Implementaciones adicionales en Custom Select (drag del scrollbar)
      </p>
    </div>

    <div class="eventos-demo__card">
      <h3>Custom Select - Scrollbar Personalizado</h3>

      <div class="eventos-demo__instructions">
        <h4>Contexto 1: Mouse Drag (preventDefault + stopPropagation)</h4>
        <p>Cuando arrastras la barra de scroll con el mouse en un custom select:</p>
        <ol>
          <li><code>preventDefault()</code> evita que se seleccione texto mientras arrastras</li>
          <li><code>stopPropagation()</code> evita que el click cierre el dropdown</li>
        </ol>

        <h4 style="margin-top: 1.5rem;">Contexto 2: Touch Drag (preventDefault + stopPropagation)</h4>
        <p>Lo mismo pero para dispositivos t√°ctiles:</p>
        <ol>
          <li><code>preventDefault()</code> evita el comportamiento por defecto del touch</li>
          <li><code>stopPropagation()</code> evita que el touch cierre el dropdown</li>
        </ol>
      </div>

      <div class="eventos-demo__code">
        <h4>C√≥digo TypeScript (Mouse):</h4>
        <pre><code>onScrollbarMouseDown(event: MouseEvent): void &#123;
  // PREVENCI√ìN: Evitar selecci√≥n de texto durante el drag
  event.preventDefault();
  // CONTROL DE PROPAGACI√ìN: Evitar que el click cierre el dropdown
  event.stopPropagation();
  this.startDrag(event.clientY);
&#125;</code></pre>

        <h4>C√≥digo TypeScript (Touch):</h4>
        <pre><code>onScrollbarTouchStart(event: TouchEvent): void &#123;
  // PREVENCI√ìN: Evitar comportamiento por defecto del touch
  event.preventDefault();
  // CONTROL DE PROPAGACI√ìN: Evitar que el touch cierre el dropdown
  event.stopPropagation();
  const touch = event.touches[0];
  this.startDrag(touch.clientY);
&#125;</code></pre>

        <h4>Ubicaci√≥n real:</h4>
        <ul>
          <li><code>src/components/shared/custom-select/custom-select.ts</code> l√≠neas 171-176 (mouse)</li>
          <li><code>src/components/shared/custom-select/custom-select.ts</code> l√≠neas 187-193 (touch)</li>
        </ul>

        <h4>C√≥mo probarlo:</h4>
        <p>Ve a <code>/register</code>, paso 2, abre cualquier select y arrastra la barra de scroll personalizada</p>
      </div>
    </div>
  </section>

  <!-- ============================================================================ -->
  <!--  SECCI√ìN 8: M√ÅS @HostListener (R√öBRICA 2.4)                                 -->
  <!-- ============================================================================ -->
  <section class="eventos-demo__section">
    <div class="eventos-demo__section-header">
      <h2 class="eventos-demo__section-title">
        <span class="badge badge--warning">2.4</span>
        8. Eventos Adicionales con @HostListener
      </h2>
      <p class="eventos-demo__description">
        Implementaciones extra: document:wheel, document:keydown (Tab), eventos de mouse y focus
      </p>
    </div>

    <div class="eventos-demo__card">
      <h3>Modal - Prevenir Scroll del Body</h3>

      <div class="eventos-demo__instructions">
        <h4>@HostListener('document:wheel')</h4>
        <p>Cuando el modal est√° abierto, previene que el scroll de la rueda del mouse afecte al contenido de fondo:</p>
      </div>

      <div class="eventos-demo__code">
        <pre><code>@HostListener('document:wheel', ['$event'])
onDocumentWheel(event: WheelEvent): void &#123;
  if (this.isOpen && this.blockScroll) &#123;
    const target = event.target as HTMLElement;
    const modalElement = target.closest('.modal');

    if (!modalElement) &#123;
      event.preventDefault();
    &#125;
  &#125;
&#125;</code></pre>

        <h4>Ubicaci√≥n real:</h4>
        <ul>
          <li><code>src/components/shared/modal/modal.ts</code> l√≠neas 96-108</li>
        </ul>
      </div>
    </div>

    <div class="eventos-demo__card">
      <h3>Modal - Trap Focus (mantener foco dentro)</h3>

      <div class="eventos-demo__instructions">
        <h4>@HostListener('document:keydown', ['$event']) - Tab Key</h4>
        <p>Cuando el modal est√° abierto, la tecla Tab mantiene el foco dentro del modal (no escapa):</p>
      </div>

      <div class="eventos-demo__code">
        <pre><code>@HostListener('document:keydown', ['$event'])
onTabKey(event: KeyboardEvent): void &#123;
  if (!this.isOpen || event.key !== 'Tab') return;

  // Obtener elementos enfocables dentro del modal
  const focusableElements = this.getFocusableElements();
  const firstElement = focusableElements[0];
  const lastElement = focusableElements[focusableElements.length - 1];

  // L√≥gica de trap focus...
&#125;</code></pre>

        <h4>Ubicaci√≥n real:</h4>
        <ul>
          <li><code>src/components/shared/modal/modal.ts</code> l√≠neas 114-146</li>
        </ul>
      </div>
    </div>

    <div class="eventos-demo__card">
      <h3>Tooltip - Eventos de Interacci√≥n</h3>

      <div class="eventos-demo__instructions">
        <h4>4 eventos de mouse y focus:</h4>
        <ol>
          <li><code>@HostListener('mouseenter')</code> - Mostrar tooltip al pasar el mouse</li>
          <li><code>@HostListener('mouseleave')</code> - Ocultar tooltip al salir</li>
          <li><code>@HostListener('focusin')</code> - Mostrar tooltip al enfocar con teclado</li>
          <li><code>@HostListener('focusout')</code> - Ocultar tooltip al desenfocar</li>
        </ol>
      </div>

      <div class="eventos-demo__code">
        <pre><code>@HostListener('mouseenter')
onMouseEnter(): void &#123; this.scheduleShow(); &#125;

@HostListener('mouseleave')
onMouseLeave(): void &#123; this.scheduleHide(); &#125;

@HostListener('focusin')
onFocusIn(): void &#123; this.scheduleShow(); &#125;

@HostListener('focusout')
onFocusOut(): void &#123; this.scheduleHide(); &#125;</code></pre>

        <h4>Ubicaci√≥n real:</h4>
        <ul>
          <li><code>src/components/shared/tooltip/tooltip.ts</code> l√≠neas 98-125</li>
        </ul>

        <h4>C√≥mo probarlo:</h4>
        <p>Ve a <code>/style-guide</code>, secci√≥n Tooltip, pasa el mouse sobre los elementos con tooltips</p>
      </div>
    </div>
  </section>

  <!-- ============================================================================ -->
  <!--                    RESUMEN FINAL                                             -->
  <!-- ============================================================================ -->
  <section class="eventos-demo__section">
    <div class="eventos-demo__section-header">
      <h2 class="eventos-demo__section-title">
        Resumen de Implementaciones
      </h2>
    </div>

    <div class="eventos-demo__card">
      <h3>R√∫brica 2.3: Prevenci√≥n y Control de Propagaci√≥n</h3>
      <p><strong>preventDefault() en 4 formularios:</strong></p>
      <ol>
        <li>Login page - <code>login.ts:109</code></li>
        <li>Register page - <code>register.ts:288</code></li>
        <li>Forms-demo (formulario registro) - <code>forms-demo.ts:173</code></li>
        <li>Forms-demo (formulario factura) - <code>forms-demo.ts:319</code></li>
      </ol>

      <p><strong>stopPropagation() en modal:</strong></p>
      <ol start="5">
        <li>Modal component - <code>modal.ts:74</code></li>
      </ol>

      <p><strong>preventDefault() + stopPropagation() en custom-select:</strong></p>
      <ol start="6">
        <li>Scrollbar mousedown - <code>custom-select.ts:171-176</code></li>
        <li>Scrollbar touchstart - <code>custom-select.ts:187-193</code></li>
      </ol>

      <p><strong>preventDefault() + stopPropagation() en accordion (5 teclas):</strong></p>
      <ol start="8">
        <li>ArrowUp - <code>accordion.ts:116-121</code></li>
        <li>ArrowDown - <code>accordion.ts:124-128</code></li>
        <li>Home - <code>accordion.ts:131-135</code></li>
        <li>End - <code>accordion.ts:138-142</code></li>
        <li>Enter/Space - <code>accordion.ts:145-152</code></li>
      </ol>

      <p><strong>TOTAL R√öBRICA 2.3: 12 contextos diferentes ‚úì</strong></p>

      <hr style="margin: 2rem 0; border: none; border-top: 2px solid #e0e0e0;">

      <h3>R√∫brica 2.4: Eventos Globales con @HostListener</h3>

      <p><strong>document:click (2 componentes):</strong></p>
      <ol>
        <li>Header - <code>header.ts:197</code></li>
        <li>Custom-select - <code>custom-select.ts:84</code></li>
      </ol>

      <p><strong>document:keydown.escape (4 componentes):</strong></p>
      <ol start="3">
        <li>Modal - <code>modal.ts:85</code></li>
        <li>Header - <code>header.ts:187</code></li>
        <li>Custom-select - <code>custom-select.ts:92</code></li>
        <li>Tooltip - <code>tooltip.ts:130</code></li>
      </ol>

      <p><strong>window:resize (2 componentes):</strong></p>
      <ol start="7">
        <li>Modal - <code>modal.ts:153</code></li>
        <li>Custom-select - <code>custom-select.ts:102</code></li>
      </ol>

      <p><strong>Eventos adicionales:</strong></p>
      <ol start="9">
        <li>Modal - <code>document:wheel</code> - <code>modal.ts:96</code></li>
        <li>Modal - <code>document:keydown</code> (Tab trap) - <code>modal.ts:114</code></li>
        <li>Tooltip - <code>mouseenter</code> - <code>tooltip.ts:98</code></li>
        <li>Tooltip - <code>mouseleave</code> - <code>tooltip.ts:106</code></li>
        <li>Tooltip - <code>focusin</code> - <code>tooltip.ts:114</code></li>
        <li>Tooltip - <code>focusout</code> - <code>tooltip.ts:122</code></li>
      </ol>

      <p><strong>TOTAL R√öBRICA 2.4: 14 @HostListener en 4+ componentes ‚úì</strong></p>

      <div class="alert alert--success" style="margin-top: 2rem;">
        <strong>‚úì Todas las implementaciones est√°n funcionando correctamente</strong>
        <br>
        <small>Documentado en: <code>frontend/RUBRICA_2.3_2.4_IMPLEMENTACION.md</code></small>
        <br>
        <small>Documentado en: <code>frontend/README Entorno cliente.md</code></small>
      </div>
    </div>
  </section>
</div>
