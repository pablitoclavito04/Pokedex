<!-- ============================================================================
     LOGIN PAGE - Página de inicio de sesión

     Diseño similar al Portal de Entrenadores Pokémon:
     - Fondo con imagen de Pikachu durmiendo
     - Tarjeta central con formulario
     - Logo en la parte superior
     - Botones de login social
     ============================================================================ -->

<main class="login-page">

  <!-- Contenedor de la tarjeta de login -->
  <div class="login-card">

    <!-- ========== BOTÓN CERRAR ========== -->
    <button
      type="button"
      class="login-card__close"
      routerLink="/"
      aria-label="Volver al inicio">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="18" y1="6" x2="6" y2="18"/>
        <line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    </button>

    <!-- ========== LOGO ========== -->
    <header class="login-card__header">
      <img
        src="favicon.png"
        alt="Pokédex Logo"
        class="login-card__logo">
      <h1 class="login-card__title">Pokédex</h1>
    </header>

    <!-- ========== AVISO INFORMATIVO ========== -->
    <div class="login-card__notice">
      <p class="login-card__notice-text">
        <strong>¡Bienvenido a la Pokédex!</strong><br>
        Inicia sesión para guardar tus Pokémon favoritos.
      </p>
    </div>

    <!-- ========== TÍTULO DEL FORMULARIO ========== -->
    <h2 class="login-card__form-title">Inicia sesión en tu cuenta</h2>

    <!-- ========== FORMULARIO ========== -->
    <form class="login-card__form" #loginForm="ngForm" (ngSubmit)="onSubmit($event)" novalidate>

      <!-- Error de login del servidor -->
      @if (loginError) {
        <div class="login-card__server-error">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
          </svg>
          <span>{{ loginError }}</span>
        </div>
      }

      <!-- Campo: Nombre de usuario -->
      <div class="login-card__field">
        <input
          type="text"
          id="username"
          name="username"
          class="login-card__input"
          [class.login-card__input--error]="(hasAttemptedSubmit && errors.username) || loginError"
          placeholder="Nombre de usuario"
          [(ngModel)]="formData.username"
          (ngModelChange)="onInputChange()"
          autocomplete="off"
          data-form-type="other">
        @if (hasAttemptedSubmit && errors.username) {
          <span class="login-card__error">{{ errors.username }}</span>
        }
      </div>

      <!-- Campo: Contraseña -->
      <div class="login-card__field">
        <div class="login-card__password-wrapper">
          <input
            type="text"
            [class.password-hidden]="!showPassword"
            id="password"
            name="pass"
            class="login-card__input"
            [class.login-card__input--error]="(hasAttemptedSubmit && errors.password) || loginError"
            placeholder="Contraseña"
            [(ngModel)]="formData.password"
            (ngModelChange)="onInputChange()"
            autocomplete="off"
            data-form-type="other">
          <button
            type="button"
            class="login-card__password-toggle"
            (click)="togglePasswordVisibility()"
            [attr.aria-label]="showPassword ? 'Ocultar contraseña' : 'Mostrar contraseña'">
            <!-- Icono ojo abierto -->
            @if (!showPassword) {
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            }
            <!-- Icono ojo cerrado -->
            @if (showPassword) {
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
                <line x1="1" y1="1" x2="23" y2="23"/>
              </svg>
            }
          </button>
        </div>
        @if (hasAttemptedSubmit && errors.password) {
          <span class="login-card__error">{{ errors.password }}</span>
        }
      </div>

      <!-- Botón: Iniciar sesión -->
      <button
        type="submit"
        class="login-card__submit"
        [disabled]="isSubmitting">
        Iniciar sesión
      </button>

    </form>

    <!-- ========== REGISTRO ========== -->
    <div class="login-card__register">
      <p>¿No tienes una cuenta?</p>
      <button type="button" class="login-card__register-btn" routerLink="/register">
        Crea una cuenta
      </button>
    </div>

    <!-- ========== FOOTER ========== -->
    <footer class="login-card__footer">
      <p>&copy;2025 Pokédex.</p>
    </footer>

  </div>

</main>