<!-- ============================================================================
     HOME PAGE - Página de inicio / Landing Page

     Secciones:
     - Hero: Presentación principal con CTA
     - Features: Características de la aplicación
     - Stats: Estadísticas destacadas
     - CTA Final: Llamada a la acción

     Nota: El footer está en app.html de forma global
     ============================================================================ -->

<main class="home">

  <!-- ========== HERO SECTION ========== -->
  <section class="hero" aria-labelledby="hero-title">
    <div class="hero__container">

      <!-- Logo animado (favicon) con srcset para diferentes resoluciones -->
      <div class="hero__logo" aria-hidden="true">
        <img
          src="favicon.png"
          srcset="favicon.png 1x, favicon.png 2x"
          alt=""
          class="hero__logo-image"
          width="120"
          height="120"
          loading="eager"
          fetchpriority="high">
      </div>

      <!-- Título principal -->
      <h1 class="hero__title" id="hero-title">Pokédex</h1>

      <!-- Subtítulo -->
      <p class="hero__subtitle">
        ¡Bienvenido a la enciclopedia digital más completa del mundo Pokémon!
      </p>

      <!-- Descripción en tarjeta -->
      <div class="hero__card">
        <p class="hero__description">
          Descubre información detallada sobre más de <strong>1,000 Pokémon</strong>,
          sus estadísticas, evoluciones, movimientos y mucho más.
        </p>
        <p class="hero__description">
          Únete a millones de entrenadores de todo el mundo y conviértete en un
          <strong>maestro Pokémon</strong>.
        </p>
        <p class="hero__cta-text">¡Tu aventura comienza aquí!</p>
      </div>

      <!-- Botones de acción -->
      <div class="hero__actions">
        <app-button
          variant="primary"
          size="lg"
          href="/login">
          Iniciar sesión
        </app-button>
        <app-button
          variant="secondary"
          size="lg"
          href="/register">
          Crear cuenta
        </app-button>
      </div>

      <!-- Enlace para explorar sin cuenta -->
      <p class="hero__explore">
        <a routerLink="/pokedex" class="hero__explore-link">
          Explorar Pokédex sin cuenta
          <svg class="hero__explore-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <path d="M5 12h14M12 5l7 7-7 7"/>
          </svg>
        </a>
      </p>
      <p class="hero__explore-note">
        * Para añadir Pokémons en Favoritos y poder hacer Quiz se necesita una cuenta registrada *
      </p>

    </div>
  </section>

  <!-- ========== POKÉMON DEL DÍA SECTION ========== -->
  <section class="pokemon-of-day-section" aria-labelledby="pokemon-day-section-title">
    <div class="pokemon-of-day-section__container">
      <h2 class="pokemon-of-day-section__title" id="pokemon-day-section-title">Pokémon del día</h2>
      <p class="pokemon-of-day-section__subtitle">
        Descubre qué Pokémon te espera hoy. ¡Cambia cada 24 horas!
      </p>
      <button
        class="pokemon-of-day-section__btn"
        (click)="showPokemonOfDayCard()"
        [disabled]="isLoadingPokemon">
        @if (isLoadingPokemon) {
          <span>Cargando...</span>
        } @else {
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <circle cx="12" cy="12" r="10"/>
            <circle cx="12" cy="12" r="3"/>
            <line x1="2" y1="12" x2="9" y2="12"/>
            <line x1="15" y1="12" x2="22" y2="12"/>
          </svg>
          <span>Descubrir Pokémon</span>
        }
      </button>
    </div>
  </section>

  <!-- ========== MODAL POKÉMON DEL DÍA ========== -->
  @if (showPokemonOfDay && pokemonOfDay) {
    <div class="pokemon-modal-overlay" (click)="closePokemonOfDay()" role="dialog" aria-modal="true" aria-labelledby="pokemon-day-title">
      <div class="pokemon-modal" (click)="$event.stopPropagation()">
        <button class="pokemon-modal__close" (click)="closePokemonOfDay()" aria-label="Cerrar modal" type="button">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>

        <div class="pokemon-modal__image-container">
          <img
            [src]="pokemonOfDay.image"
            [alt]="'Imagen del Pokémon ' + pokemonOfDay.name"
            class="pokemon-modal__image">
        </div>

        <h3 class="pokemon-modal__name" id="pokemon-day-title">{{ pokemonOfDay.name }}</h3>
        <span class="pokemon-modal__number">{{ formatPokemonId(pokemonOfDay.id) }}</span>

        <div class="pokemon-modal__types">
          @for (type of pokemonOfDay.types; track type) {
            <span
              class="pokemon-modal__type"
              [style.background-color]="getTypeColor(type)">
              {{ getTypeName(type) }}
            </span>
          }
        </div>

        <div class="pokemon-modal__stats">
          <div class="pokemon-modal__stat">
            <span class="pokemon-modal__stat-value">{{ pokemonOfDay.height }} m</span>
            <span class="pokemon-modal__stat-label">Altura</span>
          </div>
          <div class="pokemon-modal__stat">
            <span class="pokemon-modal__stat-value">{{ pokemonOfDay.weight }} kg</span>
            <span class="pokemon-modal__stat-label">Peso</span>
          </div>
        </div>
      </div>
    </div>
  }

  <!-- ========== CARRUSEL POKÉMON SECTION ========== -->
  <section
    class="carousel-section"
    aria-labelledby="carousel-title"
    (mouseenter)="pauseAutoplay()"
    (mouseleave)="resumeAutoplay()"
    (focusin)="pauseAutoplay()"
    (focusout)="resumeAutoplay()">

    <h2 class="carousel-section__title" id="carousel-title">Explora el mundo Pokémon</h2>
    <p class="carousel-section__subtitle">
      Descubre momentos inolvidables del universo Pokémon
    </p>

    <!-- Instrucciones para lectores de pantalla -->
    <p class="sr-only">
      Carrusel de imágenes con reproducción automática. Usa las flechas izquierda y derecha del teclado para navegar.
      El carrusel se pausa automáticamente al pasar el ratón o al recibir el foco.
    </p>

    <!-- Contenedor del carrusel -->
    <div
      class="carousel"
      role="region"
      aria-roledescription="carrusel"
      aria-label="Galería de imágenes Pokémon">

      <!-- Botón anterior -->
      <button
        class="carousel__btn carousel__btn--prev"
        (click)="prevSlide()"
        aria-label="Imagen anterior"
        type="button">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <path d="M15 18l-6-6 6-6"/>
        </svg>
      </button>

      <!-- Contenedor de slides -->
      <div class="carousel__viewport">
        <div
          class="carousel__track"
          [style.transform]="'translateX(-' + (currentSlide * 100) + '%)'">
          @for (slide of carouselSlides; track slide.id; let i = $index) {
            <figure
              class="carousel__slide"
              [attr.aria-hidden]="i !== currentSlide"
              role="group"
              [attr.aria-roledescription]="'slide'"
              [attr.aria-label]="'Slide ' + (i + 1) + ' de ' + carouselSlides.length">
              <img
                [src]="slide.image"
                [alt]="slide.alt"
                class="carousel__image"
                loading="lazy">
              <figcaption class="carousel__caption">
                {{ slide.caption }}
              </figcaption>
            </figure>
          }
        </div>
      </div>

      <!-- Botón siguiente -->
      <button
        class="carousel__btn carousel__btn--next"
        (click)="nextSlide()"
        aria-label="Imagen siguiente"
        type="button">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <path d="M9 18l6-6-6-6"/>
        </svg>
      </button>
    </div>

    <!-- Indicadores y controles -->
    <div class="carousel__controls">
      <!-- Indicador de posición -->
      <div
        class="carousel__indicators"
        role="tablist"
        aria-label="Seleccionar imagen del carrusel">
        @for (slide of carouselSlides; track slide.id; let i = $index) {
          <button
            class="carousel__indicator"
            [class.carousel__indicator--active]="i === currentSlide"
            (click)="goToSlide(i)"
            role="tab"
            [attr.aria-selected]="i === currentSlide"
            [attr.aria-label]="'Ir a imagen ' + (i + 1) + ': ' + slide.caption"
            type="button">
          </button>
        }
      </div>

      <!-- Indicador numérico con aria-live -->
      <p
        class="carousel__position"
        aria-live="polite"
        aria-atomic="true">
        {{ currentSlide + 1 }} / {{ carouselSlides.length }}
      </p>
    </div>
  </section>

  <!-- ========== FEATURES SECTION ========== -->
  <section class="features" id="features" aria-labelledby="features-title">
    <div class="features__container">

      <header class="features__header">
        <h2 class="features__title" id="features-title">¿Qué puedes hacer?</h2>
        <p class="features__subtitle">
          Todo lo que necesitas para convertirte en el mejor entrenador Pokémon
        </p>
      </header>

      <div class="features__grid">
        @for (feature of features; track feature.title) {
          <article class="feature-card">
            <h3 class="feature-card__title">{{ feature.title }}</h3>
            <p class="feature-card__description">{{ feature.description }}</p>
          </article>
        }
      </div>

    </div>
  </section>

  <!-- ========== STATS SECTION ========== -->
  <section class="stats-section" aria-labelledby="stats-title">
    <div class="stats-section__container">
      <h2 class="stats-section__title sr-only" id="stats-title">Estadísticas de la Pokédex</h2>
      <div class="stats-section__grid">
        @for (stat of stats; track stat.label) {
          <div class="stat-item">
            <span class="stat-item__value">{{ stat.value }}</span>
            <span class="stat-item__label">{{ stat.label }}</span>
          </div>
        }
      </div>
    </div>
  </section>

  <!-- ========== CTA SECTION ========== -->
  <section class="cta-section" aria-labelledby="cta-title">
    <div class="cta-section__container">
      <h2 class="cta-section__title" id="cta-title">¿Listo para comenzar tu aventura?</h2>
      <p class="cta-section__description">
        Crea tu cuenta gratis y empieza a explorar el mundo Pokémon
      </p>
      <div class="cta-section__actions">
        <app-button
          variant="secondary"
          size="lg"
          href="/register">
          Registrarse gratis
        </app-button>
      </div>
    </div>
  </section>

</main>
