import{a as Y}from"./chunk-STHJB42X.js";import{e as I,f as T}from"./chunk-GKLAR3GE.js";import{a as N}from"./chunk-SYVWD7B3.js";import{c as j,f as B,g as R,h as W,i as U,j as G,y as H}from"./chunk-OXP47ANV.js";import{a as A}from"./chunk-ZOOKMLVN.js";import"./chunk-JVQM422X.js";import{Ab as l,Bb as M,Eb as v,Fb as w,Gb as x,Ha as f,Ma as y,Sb as V,V as d,W as g,Wa as F,X as h,Xa as p,Y as P,Za as u,cb as L,db as t,eb as o,fb as m,jc as z,l as k,mb as D,o as S,ob as C,qb as b,y as E,yb as O,za as c}from"./chunk-YPKSWN7B.js";function J(i,r){if(i&1&&(t(0,"div",14),h(),t(1,"svg",25),m(2,"path",26),o(),P(),t(3,"span"),l(4),o()()),i&2){let e=b();c(4),M(e.loginError)}}function K(i,r){if(i&1&&(t(0,"span",17),l(1),o()),i&2){let e=b();c(),M(e.errors.username)}}function Q(i,r){i&1&&(h(),t(0,"svg",4),m(1,"path",27)(2,"circle",28),o())}function X(i,r){i&1&&(h(),t(0,"svg",4),m(1,"path",29)(2,"line",30),o())}function Z(i,r){if(i&1&&(t(0,"span",17),l(1),o()),i&2){let e=b();c(),M(e.errors.password)}}var q=class i{constructor(r,e,n,s,_){this.router=r;this.authService=e;this.loadingService=n;this.toastService=s;this.cdr=_;this.loadSavedCredentials()}formData={username:"",password:""};loadSavedCredentials(){let r=localStorage.getItem("lastUsername"),e=localStorage.getItem("lastPassword");r&&(this.formData.username=r),e&&(this.formData.password=e)}isSubmitting=!1;showPassword=!1;hasAttemptedSubmit=!1;loginError="";errors={username:"",password:""};togglePasswordVisibility(){this.showPassword=!this.showPassword}validateUsername(){return this.formData.username.trim()?(this.errors.username="",!0):(this.errors.username="El nombre de usuario es obligatorio",!1)}validatePassword(){return this.formData.password?(this.errors.password="",!0):(this.errors.password="La contrase\xF1a es obligatoria",!1)}validateForm(){let r=this.validateUsername(),e=this.validatePassword();return r&&e}onInputChange(){this.loginError&&(this.loginError="")}onFormFocusIn(r){let e=r.target;console.log("FocusIn en formulario - elemento:",e.tagName,e.id||e.name||"")}onFormFocusOut(r){let e=r.target;console.log("FocusOut en formulario - elemento:",e.tagName,e.id||e.name||"")}onSubmit(r){r.preventDefault(),this.hasAttemptedSubmit=!0,this.loginError="",this.validateForm()&&(this.isSubmitting=!0,this.loadingService.show(),this.authService.login({username:this.formData.username,password:this.formData.password}).pipe(S(1e4),E(e=>k(()=>e))).subscribe({next:e=>{console.log("Login exitoso:",e),sessionStorage.setItem("showWelcomeToast","true"),setTimeout(()=>{this.isSubmitting=!1,this.loadingService.hide(),this.router.navigate(["/pokedex"])},2e3)},error:e=>{console.error("Error de login:",e),this.loadingService.hide(),this.isSubmitting=!1,e.name==="TimeoutError"?(this.loginError="El servidor no responde. Int\xE9ntalo de nuevo.",this.toastService.error("El servidor no responde")):e.status===0?(this.loginError="No se puede conectar con el servidor.",this.toastService.error("Sin conexi\xF3n al servidor")):(this.loginError="Usuario o contrase\xF1a incorrectos",this.toastService.error("Credenciales incorrectas")),this.cdr.detectChanges()}}))}goToRegister(){this.router.navigate(["/register"])}onForgotPassword(){console.log("Forgot password clicked")}loginWithGoogle(){console.log("Login with Google")}loginWithApple(){console.log("Login with Apple")}static \u0275fac=function(e){return new(e||i)(f(I),f(Y),f(A),f(N),f(V))};static \u0275cmp=y({type:i,selectors:[["app-login"]],decls:41,vars:15,consts:[["loginForm","ngForm"],[1,"login-page"],[1,"login-card"],["type","button","routerLink","/","aria-label","Volver al inicio",1,"login-card__close"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"login-card__header"],["src","favicon.png","alt","Pok\xE9dex Logo",1,"login-card__logo"],[1,"login-card__title"],[1,"login-card__notice"],[1,"login-card__notice-text"],[1,"login-card__form-title"],["novalidate","",1,"login-card__form",3,"ngSubmit","focusin","focusout"],[1,"login-card__server-error"],[1,"login-card__field"],["type","text","id","username","name","username","placeholder","Nombre de usuario","autocomplete","off","data-form-type","other",1,"login-card__input",3,"ngModelChange","ngModel"],[1,"login-card__error"],[1,"login-card__password-wrapper"],["type","text","id","password","name","pass","placeholder","Contrase\xF1a","autocomplete","off","data-form-type","other",1,"login-card__input",3,"ngModelChange","ngModel"],["type","button",1,"login-card__password-toggle",3,"click"],["type","submit",1,"login-card__submit",3,"disabled"],[1,"login-card__register"],["type","button","routerLink","/register",1,"login-card__register-btn"],[1,"login-card__footer"],["viewBox","0 0 24 24","fill","currentColor"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"],["cx","12","cy","12","r","3"],["d","M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"],["x1","1","y1","1","x2","23","y2","23"]],template:function(e,n){if(e&1){let s=D();t(0,"main",1)(1,"div",2)(2,"button",3),h(),t(3,"svg",4),m(4,"line",5)(5,"line",6),o()(),P(),t(6,"header",7),m(7,"img",8),t(8,"h1",9),l(9,"Pok\xE9dex"),o()(),t(10,"div",10)(11,"p",11)(12,"strong"),l(13,"\xA1Bienvenido a la Pok\xE9dex!"),o(),m(14,"br"),l(15," Inicia sesi\xF3n para guardar tus Pok\xE9mon favoritos. "),o()(),t(16,"h2",12),l(17,"Inicia sesi\xF3n en tu cuenta"),o(),t(18,"form",13,0),C("ngSubmit",function(a){return d(s),g(n.onSubmit(a))})("focusin",function(a){return d(s),g(n.onFormFocusIn(a))})("focusout",function(a){return d(s),g(n.onFormFocusOut(a))}),p(20,J,5,1,"div",14),t(21,"div",15)(22,"input",16),x("ngModelChange",function(a){return d(s),w(n.formData.username,a)||(n.formData.username=a),g(a)}),C("ngModelChange",function(){return d(s),g(n.onInputChange())}),o(),p(23,K,2,1,"span",17),o(),t(24,"div",15)(25,"div",18)(26,"input",19),x("ngModelChange",function(a){return d(s),w(n.formData.password,a)||(n.formData.password=a),g(a)}),C("ngModelChange",function(){return d(s),g(n.onInputChange())}),o(),t(27,"button",20),C("click",function(){return d(s),g(n.togglePasswordVisibility())}),p(28,Q,3,0,":svg:svg",4),p(29,X,3,0,":svg:svg",4),o()(),p(30,Z,2,1,"span",17),o(),t(31,"button",21),l(32," Iniciar sesi\xF3n "),o()(),t(33,"div",22)(34,"p"),l(35,"\xBFNo tienes una cuenta?"),o(),t(36,"button",23),l(37," Crea una cuenta "),o()(),t(38,"footer",24)(39,"p"),l(40,"\xA92025 Pok\xE9dex."),o()()()()}e&2&&(c(20),u(n.loginError?20:-1),c(2),O("login-card__input--error",n.hasAttemptedSubmit&&n.errors.username||n.loginError),v("ngModel",n.formData.username),c(),u(n.hasAttemptedSubmit&&n.errors.username?23:-1),c(3),O("password-hidden",!n.showPassword)("login-card__input--error",n.hasAttemptedSubmit&&n.errors.password||n.loginError),v("ngModel",n.formData.password),c(),F("aria-label",n.showPassword?"Ocultar contrase\xF1a":"Mostrar contrase\xF1a"),c(),u(n.showPassword?-1:28),c(),u(n.showPassword?29:-1),c(),u(n.hasAttemptedSubmit&&n.errors.password?30:-1),c(),L("disabled",n.isSubmitting))},dependencies:[z,T,H,G,j,B,R,U,W],styles:['.login-page[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:1rem;background:#d4a535 url(/Pokedex/Pikachu\\ durmiendo.png) center bottom/cover no-repeat fixed}.login-page[_ngcontent-%COMP%]:before{content:"";position:fixed;inset:0;background:#0000004d;z-index:0}.login-card[_ngcontent-%COMP%]{position:relative;z-index:1;width:100%;max-width:400px;background:#fff;border-radius:1rem;box-shadow:0 10px 40px #0000001a;padding:1.25rem}.dark-theme[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{background:#2f4467;box-shadow:0 10px 40px #0000004d}@media(min-width:640px){.login-card[_ngcontent-%COMP%]{padding:1.5rem}}.login-card__close[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;display:flex;align-items:center;justify-content:center;width:32px;height:32px;background:transparent;border:none;border-radius:.375rem;color:#6b7280;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);z-index:10}.login-card__close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.login-card__close[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#1a1a2e}.dark-theme[_ngcontent-%COMP%]   .login-card__close[_ngcontent-%COMP%]{color:#fff9}.dark-theme[_ngcontent-%COMP%]   .login-card__close[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:#fff}.login-card__header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:.5rem;margin-bottom:1rem}.login-card__logo[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:contain;border-radius:50%}.login-card__title[_ngcontent-%COMP%]{font-family:Poppins,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:1.5rem;font-weight:700;color:#1a1a2e;margin:0}.dark-theme[_ngcontent-%COMP%]   .login-card__title[_ngcontent-%COMP%]{color:#fff}.login-card__notice[_ngcontent-%COMP%]{background:#fff9e6;border:1px solid #F0E6CC;border-radius:.5rem;padding:.75rem;margin-bottom:1rem;text-align:center}.dark-theme[_ngcontent-%COMP%]   .login-card__notice[_ngcontent-%COMP%]{background:#ffc1071a;border-color:#ffc1074d}.login-card__notice-text[_ngcontent-%COMP%]{font-size:.75rem;color:#5d4e37;margin:0;line-height:1.5}.login-card__notice-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1a1a2e}.dark-theme[_ngcontent-%COMP%]   .login-card__notice-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#fff}.dark-theme[_ngcontent-%COMP%]   .login-card__notice-text[_ngcontent-%COMP%]{color:#fffc}.login-card__form-title[_ngcontent-%COMP%]{font-family:Poppins,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:1.25rem;font-weight:700;color:#1a1a2e;text-align:center;margin:0 0 1rem}.dark-theme[_ngcontent-%COMP%]   .login-card__form-title[_ngcontent-%COMP%]{color:#fff}.login-card__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.login-card__field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.login-card__input[_ngcontent-%COMP%]{width:100%;padding:.75rem;font-size:.875rem;color:#1a1a2e;background:#3d3d3d;border:2px solid transparent;border-radius:.5rem;transition:all .3s cubic-bezier(.4,0,.2,1)}.login-card__input[_ngcontent-%COMP%]{background:#3d3d3d;color:#fff}.login-card__input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.login-card__input[_ngcontent-%COMP%]:-webkit-autofill, .login-card__input[_ngcontent-%COMP%]:-webkit-autofill:hover{-webkit-box-shadow:0 0 0 1000px #3D3D3D inset,0 0 0 3px rgba(59,130,246,.3)!important;-webkit-text-fill-color:#ffffff!important;border-color:#3b82f6!important;caret-color:#fff}.login-card__input[_ngcontent-%COMP%]:-webkit-autofill:focus{-webkit-box-shadow:0 0 0 1000px #3D3D3D inset,0 0 0 3px rgba(59,130,246,.3)!important;-webkit-text-fill-color:#ffffff!important;border-color:#3b82f6!important;caret-color:#fff}.login-card__input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f64d}.login-card__input--error[_ngcontent-%COMP%]{border-color:#ef4444!important;box-shadow:0 0 0 3px #ef444433!important}.login-card__input--error[_ngcontent-%COMP%]:focus{border-color:#ef4444!important;box-shadow:0 0 0 3px #ef444433!important}.login-card__input--error[_ngcontent-%COMP%]:-webkit-autofill, .login-card__input--error[_ngcontent-%COMP%]:-webkit-autofill:hover, .login-card__input--error[_ngcontent-%COMP%]:-webkit-autofill:focus{-webkit-box-shadow:0 0 0 1000px #3D3D3D inset,0 0 0 3px rgba(239,68,68,.2)!important;border-color:#ef4444!important}.dark-theme[_ngcontent-%COMP%]   .login-card__input[_ngcontent-%COMP%]{background:#1a1a2e;color:#fff}.dark-theme[_ngcontent-%COMP%]   .login-card__input[_ngcontent-%COMP%]::placeholder{color:#6b7280}.dark-theme[_ngcontent-%COMP%]   .login-card__input[_ngcontent-%COMP%]:-webkit-autofill, .dark-theme[_ngcontent-%COMP%]   .login-card__input[_ngcontent-%COMP%]:-webkit-autofill:hover{-webkit-box-shadow:0 0 0 1000px #1a1a2e inset,0 0 0 3px rgba(59,130,246,.3)!important;-webkit-text-fill-color:#ffffff!important;border-color:#3b82f6!important}.dark-theme[_ngcontent-%COMP%]   .login-card__input[_ngcontent-%COMP%]:-webkit-autofill:focus{-webkit-box-shadow:0 0 0 1000px #1a1a2e inset,0 0 0 3px rgba(59,130,246,.3)!important;-webkit-text-fill-color:#ffffff!important;border-color:#3b82f6!important}.login-card[_ngcontent-%COMP%]   .password-hidden[_ngcontent-%COMP%]{-webkit-text-security:disc;text-security:disc}.login-card__password-wrapper[_ngcontent-%COMP%]{position:relative}.login-card__password-toggle[_ngcontent-%COMP%]{position:absolute;right:.75rem;top:50%;transform:translateY(-50%);background:none;border:none;padding:.5rem;cursor:pointer;color:#9ca3af;transition:all .3s cubic-bezier(.4,0,.2,1)}.login-card__password-toggle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.login-card__password-toggle[_ngcontent-%COMP%]:hover{color:#fff}.dark-theme[_ngcontent-%COMP%]   .login-card__password-toggle[_ngcontent-%COMP%]{color:#6b7280}.dark-theme[_ngcontent-%COMP%]   .login-card__password-toggle[_ngcontent-%COMP%]:hover{color:#fff}.login-card__error[_ngcontent-%COMP%]{font-size:.75rem;color:#ef4444;margin-top:.25rem}.login-card__server-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem;background:#ef44441a;border:1px solid rgba(239,68,68,.3);border-radius:.5rem;margin-bottom:.5rem;animation:_ngcontent-%COMP%_shake .5s ease-in-out}.login-card__server-error[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0;color:#ef4444}.login-card__server-error[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#ef4444;line-height:1.4}.dark-theme[_ngcontent-%COMP%]   .login-card__server-error[_ngcontent-%COMP%]{background:#ef444426;border-color:#ef444466}.dark-theme[_ngcontent-%COMP%]   .login-card__server-error[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#f87171}.dark-theme[_ngcontent-%COMP%]   .login-card__server-error[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f87171}.login-card__login-error[_ngcontent-%COMP%]{background:#ef44441a;border:1px solid #ef4444;border-radius:.5rem;padding:.75rem;text-align:center;font-size:.875rem;color:#ef4444;margin-top:.5rem}.dark-theme[_ngcontent-%COMP%]   .login-card__login-error[_ngcontent-%COMP%]{background:#ef444426;border-color:#f87171;color:#f87171}.login-card__forgot[_ngcontent-%COMP%]{font-size:.875rem;color:#42aedc;text-decoration:none;text-align:center;transition:all .3s cubic-bezier(.4,0,.2,1)}.login-card__forgot[_ngcontent-%COMP%]:hover{color:#3a9bc4;text-decoration:underline}.login-card__submit[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;width:100%;padding:.75rem;margin-top:.25rem;font-size:.875rem;font-weight:600;color:#fff;background:#4caf50;border:none;border-radius:.5rem;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1)}.login-card__submit[_ngcontent-%COMP%]:hover:not(:disabled){background:#43a047;transform:translateY(-1px)}.login-card__submit[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.login-card__spinner[_ngcontent-%COMP%]{width:18px;height:18px;animation:_ngcontent-%COMP%_spin 1s linear infinite}.login-card__divider[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin:1rem 0}.login-card__divider[_ngcontent-%COMP%]:before, .login-card__divider[_ngcontent-%COMP%]:after{content:"";flex:1;height:1px;background:#e5e7eb}.dark-theme[_ngcontent-%COMP%]   .login-card__divider[_ngcontent-%COMP%]:before, .dark-theme[_ngcontent-%COMP%]   .login-card__divider[_ngcontent-%COMP%]:after{background:#ffffff1a}.login-card__divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;white-space:nowrap}.dark-theme[_ngcontent-%COMP%]   .login-card__divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff9}.login-card__social[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.75rem;margin-bottom:1rem}.login-card__social-btn[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;width:44px;height:44px;border-radius:50%;border:1px solid #E5E7EB;background:#fff;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1)}.login-card__social-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px}.login-card__social-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.dark-theme[_ngcontent-%COMP%]   .login-card__social-btn[_ngcontent-%COMP%]{background:#1a1a2e;border-color:#ffffff1a}.dark-theme[_ngcontent-%COMP%]   .login-card__social-btn[_ngcontent-%COMP%]:hover{border-color:#fff3}.login-card__social-btn--google[_ngcontent-%COMP%]:hover{border-color:#4285f4}.login-card__social-btn--apple[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#1a1a2e}.dark-theme[_ngcontent-%COMP%]   .login-card__social-btn--apple[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#fff}.login-card__social-btn--apple[_ngcontent-%COMP%]:hover{border-color:#1a1a2e}.dark-theme[_ngcontent-%COMP%]   .login-card__social-btn--apple[_ngcontent-%COMP%]:hover{border-color:#fff}.login-card__register[_ngcontent-%COMP%]{text-align:center;padding-top:.75rem;margin-top:.75rem;border-top:1px solid #E5E7EB}.dark-theme[_ngcontent-%COMP%]   .login-card__register[_ngcontent-%COMP%]{border-top-color:#ffffff1a}.login-card__register[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280;margin:0 0 .5rem}.dark-theme[_ngcontent-%COMP%]   .login-card__register[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff9}.login-card__register-btn[_ngcontent-%COMP%]{width:100%;padding:.5rem 1rem;font-size:.875rem;font-weight:600;color:#4caf50;background:#fff;border:2px solid #4CAF50;border-radius:.5rem;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1)}.login-card__register-btn[_ngcontent-%COMP%]:hover{background:#4caf50;color:#fff;transform:translateY(-1px)}.dark-theme[_ngcontent-%COMP%]   .login-card__register-btn[_ngcontent-%COMP%]{background:transparent;color:#4caf50;border-color:#4caf50}.dark-theme[_ngcontent-%COMP%]   .login-card__register-btn[_ngcontent-%COMP%]:hover{background:#4caf50;color:#fff}.login-card__footer[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;padding-top:.75rem;border-top:1px solid #E5E7EB}.dark-theme[_ngcontent-%COMP%]   .login-card__footer[_ngcontent-%COMP%]{border-top-color:#ffffff1a}.login-card__footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem;color:#9ca3af;margin:0}.dark-theme[_ngcontent-%COMP%]   .login-card__footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff6}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}10%,30%,50%,70%,90%{transform:translate(-5px)}20%,40%,60%,80%{transform:translate(5px)}}']})};export{q as LoginComponent};
